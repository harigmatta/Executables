{"flowContents":{"identifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"SCB_Template_RDC_1_final_Recon_Changes","comments":"From the case file: 852698","position":{"x":872.0,"y":720.0},"processGroups":[{"identifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"HDFS Transfer","comments":"","position":{"x":480.0,"y":1128.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"4839a3b3-b785-3272-9ffb-87afcdec58e0","name":"Notify","comments":"","position":{"x":776.0,"y":1712.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{"background-color":"#27b9e6"},"type":"org.apache.nifi.processors.standard.Notify","properties":{"signal-counter-delta":"1","distributed-cache-service":"99d82d2f-be82-3ba2-b9cd-1fcafc4bbafb","signal-buffer-count":"1","release-signal-id":"${fragment.identifier}","signal-counter-name":"scb_detokenise","attribute-cache-regex":null},"propertyDescriptors":{"signal-counter-delta":{"name":"signal-counter-delta","displayName":"Signal Counter Delta","identifiesControllerService":false,"sensitive":false},"distributed-cache-service":{"name":"distributed-cache-service","displayName":"Distributed Cache Service","identifiesControllerService":true,"sensitive":false},"signal-buffer-count":{"name":"signal-buffer-count","displayName":"Signal Buffer Count","identifiesControllerService":false,"sensitive":false},"release-signal-id":{"name":"release-signal-id","displayName":"Release Signal Identifier","identifiesControllerService":false,"sensitive":false},"signal-counter-name":{"name":"signal-counter-name","displayName":"Signal Counter Name","identifiesControllerService":false,"sensitive":false},"attribute-cache-regex":{"name":"attribute-cache-regex","displayName":"Attribute Cache Regex","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"2b8bf825-2f90-3f97-889d-8651554b7e1f","name":"Wait","comments":"","position":{"x":1208.0,"y":984.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{"background-color":"#27b9e6"},"type":"org.apache.nifi.processors.standard.Wait","properties":{"wait-buffer-count":"1","wait-mode":"keep","attribute-copy-mode":"keeporiginal","distributed-cache-service":"99d82d2f-be82-3ba2-b9cd-1fcafc4bbafb","releasable-flowfile-count":"1","release-signal-id":"${fragment.identifier}","signal-counter-name":"scb_detokenise","expiration-duration":"120 mins","target-signal-count":"${fragment.count}","wait-penalty-duration":null},"propertyDescriptors":{"wait-buffer-count":{"name":"wait-buffer-count","displayName":"Wait Buffer Count","identifiesControllerService":false,"sensitive":false},"wait-mode":{"name":"wait-mode","displayName":"Wait Mode","identifiesControllerService":false,"sensitive":false},"attribute-copy-mode":{"name":"attribute-copy-mode","displayName":"Attribute Copy Mode","identifiesControllerService":false,"sensitive":false},"distributed-cache-service":{"name":"distributed-cache-service","displayName":"Distributed Cache Service","identifiesControllerService":true,"sensitive":false},"releasable-flowfile-count":{"name":"releasable-flowfile-count","displayName":"Releasable FlowFile Count","identifiesControllerService":false,"sensitive":false},"release-signal-id":{"name":"release-signal-id","displayName":"Release Signal Identifier","identifiesControllerService":false,"sensitive":false},"signal-counter-name":{"name":"signal-counter-name","displayName":"Signal Counter Name","identifiesControllerService":false,"sensitive":false},"expiration-duration":{"name":"expiration-duration","displayName":"Expiration Duration","identifiesControllerService":false,"sensitive":false},"target-signal-count":{"name":"target-signal-count","displayName":"Target Signal Count","identifiesControllerService":false,"sensitive":false},"wait-penalty-duration":{"name":"wait-penalty-duration","displayName":"Wait Penalty Duration","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"b74ab2cd-678d-3bc4-8259-310dd936f1d7","name":"Logging - Fetch Data From ADLS Gen 2","comments":"","position":{"x":768.0,"y":1400.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"139\";-m;\"Reverse Data Copy HDFS Transfer Fetch Tokenized Tables Data From ADLS Gen 2 Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"dd36fc13-6f67-3b04-a965-8c2656f6a745","name":"Fetch Data From ADLS Gen 2","comments":"","position":{"x":760.0,"y":1184.0},"bundle":{"group":"com.cloudera","artifact":"nifi-cdf-objectstore-nar","version":"1.0.0.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.hadoop.FetchCDPObjectStore","properties":{"kerberos-credentials-service":"6bb8ec34-4727-3d4c-abed-8981068394d8","filename":"${\"azure_full_path\"}","cdp-storage-location":null,"Kerberos Principal":null},"propertyDescriptors":{"kerberos-credentials-service":{"name":"kerberos-credentials-service","displayName":"Kerberos Credentials Service","identifiesControllerService":true,"sensitive":false},"filename":{"name":"filename","displayName":"Filename","identifiesControllerService":false,"sensitive":false},"Kerberos Password":{"name":"Kerberos Password","displayName":"CDP Password","identifiesControllerService":false,"sensitive":true},"cdp-storage-location":{"name":"cdp-storage-location","displayName":"Storage Location","identifiesControllerService":false,"sensitive":false},"Kerberos Principal":{"name":"Kerberos Principal","displayName":"CDP Username","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"ff4adc93-b52d-3053-9c58-c3cad7bf4d62","name":"Logging - Bash Listing of Files","comments":"","position":{"x":-432.0,"y":784.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"138\";-m;\"Reverse Data Copy HDFS Transfer List of Tokenized Tables Files Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"7e3223c2-c687-3270-9dea-9ee2d549b44b","name":"ERROR - PutFile did not complete","comments":"","position":{"x":1904.0,"y":1248.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.PutFile","properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"${\"nfs_location_xml\"}/${\"sourcesystem_xml\"}/${\"country_xml\"}/nifi_status/saving_error/","Conflict Resolution Strategy":"fail"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"111378ea-c181-3f57-b3a8-cd80f60bc193","name":"Bash Listing of Files","comments":"","position":{"x":120.0,"y":784.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/list_files.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-b;${\"hdfs_parent_dir_xml\"};-d;${\"databases_xml\"};-t;${\"consumed_tables_xml\"};-m;${\"db_partition_map\"};-u;${\"kerberos_principal_xml\"};-k;${\"kerberos_keytab_xml\"};-p;${\"partition\"};-f\"t\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"964d12c6-797d-3041-8602-aaae20895691","name":"Set Path Properties","comments":"","position":{"x":160.0,"y":1184.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"Delete Attributes Expression":null,"filename":"${azure_full_path:substringAfterLast(\"/\")}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","fetched_table":"${azure_full_path:substringBeforeLast(\"/\"):substringBeforeLast(\"/\"):substringAfterLast(\"/\")}","Stateful Variables Initial Value":null,"fetched_partition_value":"${azure_full_path:substringBeforeLast(\"/\"):substringAfterLast(\"/\"):substringAfter(\"=\")}","fetched_partition_col":"${azure_full_path:substringBeforeLast(\"/\"):substringAfterLast(\"/\"):substringBefore(\"=\")}","staging_dir":"${azure_full_path:contains(\"sri_nonopen\"):ifElse(${\"sri_non_open_staging_dir\"}, ${azure_full_path:contains(\"sri_open\"):ifElse(${\"sri_open_staging_dir\"},${azure_full_path:contains(\"storage\"):ifElse(${\"storage_staging_dir\"}, \"/tmp/\")})})}"},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"fetched_table":{"name":"fetched_table","displayName":"fetched_table","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false},"fetched_partition_value":{"name":"fetched_partition_value","displayName":"fetched_partition_value","identifiesControllerService":false,"sensitive":false},"fetched_partition_col":{"name":"fetched_partition_col","displayName":"fetched_partition_col","identifiesControllerService":false,"sensitive":false},"staging_dir":{"name":"staging_dir","displayName":"staging_dir","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"85820c6a-760c-3505-b453-5417ff9ab353","name":"Logging - Save Data To OnPrem HDFS Staging","comments":"","position":{"x":-320.0,"y":1720.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"140\";-m;\"Reverse Data Copy HDFS Transfer Save Tokenized Tables Data To OnPrem HDFS Staging Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","name":"SplitText","comments":"","position":{"x":752.0,"y":784.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.SplitText","properties":{"Remove Trailing Newlines":"true","Maximum Fragment Size":null,"Header Line Marker Characters":null,"Header Line Count":"0","Line Split Count":"1"},"propertyDescriptors":{"Remove Trailing Newlines":{"name":"Remove Trailing Newlines","displayName":"Remove Trailing Newlines","identifiesControllerService":false,"sensitive":false},"Maximum Fragment Size":{"name":"Maximum Fragment Size","displayName":"Maximum Fragment Size","identifiesControllerService":false,"sensitive":false},"Header Line Marker Characters":{"name":"Header Line Marker Characters","displayName":"Header Line Marker Characters","identifiesControllerService":false,"sensitive":false},"Header Line Count":{"name":"Header Line Count","displayName":"Header Line Count","identifiesControllerService":false,"sensitive":false},"Line Split Count":{"name":"Line Split Count","displayName":"Line Split Count","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"659dd95e-b1ea-39d8-9de7-af720ae7209c","name":"Extract FlowFile into Attribute","comments":"","position":{"x":752.0,"y":984.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExtractText","properties":{"Enable Unicode Predefined Character Classes":"false","Permit Whitespace and Comments in Pattern":"false","Enable Unicode-aware Case Folding":"false","Enable DOTALL Mode":"false","Enable Unix Lines Mode":"false","extract-text-enable-named-groups":"false","Maximum Buffer Size":"1 MB","Enable Canonical Equivalence":"false","Enable Case-insensitive Matching":"false","Enable Multiline Mode":"false","azure_full_path":"(.*)","Maximum Capture Group Length":"1024","Enable Literal Parsing of the Pattern":"false","Character Set":"UTF-8","Include Capture Group 0":"true","extract-text-enable-repeating-capture-group":"false"},"propertyDescriptors":{"Enable Unicode Predefined Character Classes":{"name":"Enable Unicode Predefined Character Classes","displayName":"Enable Unicode Predefined Character Classes","identifiesControllerService":false,"sensitive":false},"Permit Whitespace and Comments in Pattern":{"name":"Permit Whitespace and Comments in Pattern","displayName":"Permit Whitespace and Comments in Pattern","identifiesControllerService":false,"sensitive":false},"Enable Unicode-aware Case Folding":{"name":"Enable Unicode-aware Case Folding","displayName":"Enable Unicode-aware Case Folding","identifiesControllerService":false,"sensitive":false},"Enable DOTALL Mode":{"name":"Enable DOTALL Mode","displayName":"Enable DOTALL Mode","identifiesControllerService":false,"sensitive":false},"Enable Unix Lines Mode":{"name":"Enable Unix Lines Mode","displayName":"Enable Unix Lines Mode","identifiesControllerService":false,"sensitive":false},"extract-text-enable-named-groups":{"name":"extract-text-enable-named-groups","displayName":"extract-text-enable-named-groups","identifiesControllerService":false,"sensitive":false},"Maximum Buffer Size":{"name":"Maximum Buffer Size","displayName":"Maximum Buffer Size","identifiesControllerService":false,"sensitive":false},"Enable Canonical Equivalence":{"name":"Enable Canonical Equivalence","displayName":"Enable Canonical Equivalence","identifiesControllerService":false,"sensitive":false},"Enable Case-insensitive Matching":{"name":"Enable Case-insensitive Matching","displayName":"Enable Case-insensitive Matching","identifiesControllerService":false,"sensitive":false},"Enable Multiline Mode":{"name":"Enable Multiline Mode","displayName":"Enable Multiline Mode","identifiesControllerService":false,"sensitive":false},"azure_full_path":{"name":"azure_full_path","displayName":"azure_full_path","identifiesControllerService":false,"sensitive":false},"Maximum Capture Group Length":{"name":"Maximum Capture Group Length","displayName":"Maximum Capture Group Length","identifiesControllerService":false,"sensitive":false},"Enable Literal Parsing of the Pattern":{"name":"Enable Literal Parsing of the Pattern","displayName":"Enable Literal Parsing of the Pattern","identifiesControllerService":false,"sensitive":false},"Character Set":{"name":"Character Set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false},"Include Capture Group 0":{"name":"Include Capture Group 0","displayName":"Include Capture Group 0","identifiesControllerService":false,"sensitive":false},"extract-text-enable-repeating-capture-group":{"name":"extract-text-enable-repeating-capture-group","displayName":"Enable repeating capture group","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["unmatched"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"e8a9ea11-cab7-3cca-bcef-1ec58904285d","name":"CreateCleansedTableList","comments":"","position":{"x":1208.0,"y":1184.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-scripting-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.script.ExecuteScript","properties":{"Script File":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/create_cleansed_table_list.py","Script Engine":"python","Script Body":null,"Module Directory":null},"propertyDescriptors":{"Script File":{"name":"Script File","displayName":"Script File","identifiesControllerService":false,"sensitive":false},"Script Engine":{"name":"Script Engine","displayName":"Script Engine","identifiesControllerService":false,"sensitive":false},"Script Body":{"name":"Script Body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false},"Module Directory":{"name":"Module Directory","displayName":"Module Directory","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"260d4999-0f61-35a5-83cc-a149200bf40a","name":"Set Failure Filename","comments":"","position":{"x":1896.0,"y":984.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"Delete Attributes Expression":null,"filename":"${\"sourcesystem\"}_${\"country\"}_failed_onprem_save_${\"partition\"}.ack","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"7c7c0b0d-369d-3976-8784-071bc8aa10a0","name":"Logging - Create Cleansed Table List","comments":"","position":{"x":1544.0,"y":1424.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"141\";-m;\"Reverse Data Copy HDFS Transfer Create Cleansed Tokenized Table List Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","name":"Save Data to OnPrem HDFS Staging","comments":"","position":{"x":152.0,"y":1720.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-hadoop-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.hadoop.PutHDFS","properties":{"Permissions umask":null,"Hadoop Configuration Resources":"/hadoopfs/fs1/onprem_hdfs_config/core-site.xml,/hadoopfs/fs1/onprem_hdfs_config/hdfs-site.xml","Remote Owner":null,"Additional Classpath Resources":null,"Compression codec":"NONE","IO Buffer Size":null,"Remote Group":null,"Block Size":null,"kerberos-credentials-service":"c0203483-78a8-38b6-8cb0-ae833bc2f29d","Kerberos Keytab":null,"Ignore Locality":"false","Kerberos Principal":null,"Replication":null,"kerberos-user-service":null,"writing-strategy":"writeAndRename","Kerberos Relogin Period":"4 hours","Directory":"${\"staging_dir\"}/${\"fetched_table\"}/${\"fetched_partition_col\"}=${\"fetched_partition_value\"}","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Permissions umask":{"name":"Permissions umask","displayName":"Permissions umask","identifiesControllerService":false,"sensitive":false},"Hadoop Configuration Resources":{"name":"Hadoop Configuration Resources","displayName":"Hadoop Configuration Resources","identifiesControllerService":false,"sensitive":false},"Remote Owner":{"name":"Remote Owner","displayName":"Remote Owner","identifiesControllerService":false,"sensitive":false},"Additional Classpath Resources":{"name":"Additional Classpath Resources","displayName":"Additional Classpath Resources","identifiesControllerService":false,"sensitive":false},"Compression codec":{"name":"Compression codec","displayName":"Compression codec","identifiesControllerService":false,"sensitive":false},"IO Buffer Size":{"name":"IO Buffer Size","displayName":"IO Buffer Size","identifiesControllerService":false,"sensitive":false},"Remote Group":{"name":"Remote Group","displayName":"Remote Group","identifiesControllerService":false,"sensitive":false},"Block Size":{"name":"Block Size","displayName":"Block Size","identifiesControllerService":false,"sensitive":false},"kerberos-credentials-service":{"name":"kerberos-credentials-service","displayName":"Kerberos Credentials Service","identifiesControllerService":true,"sensitive":false},"Kerberos Password":{"name":"Kerberos Password","displayName":"Kerberos Password","identifiesControllerService":false,"sensitive":true},"Kerberos Keytab":{"name":"Kerberos Keytab","displayName":"Kerberos Keytab","identifiesControllerService":false,"sensitive":false},"Ignore Locality":{"name":"Ignore Locality","displayName":"Ignore Locality","identifiesControllerService":false,"sensitive":false},"Kerberos Principal":{"name":"Kerberos Principal","displayName":"Kerberos Principal","identifiesControllerService":false,"sensitive":false},"Replication":{"name":"Replication","displayName":"Replication","identifiesControllerService":false,"sensitive":false},"kerberos-user-service":{"name":"kerberos-user-service","displayName":"Kerberos User Service","identifiesControllerService":true,"sensitive":false},"writing-strategy":{"name":"writing-strategy","displayName":"writing-strategy","identifiesControllerService":false,"sensitive":false},"Kerberos Relogin Period":{"name":"Kerberos Relogin Period","displayName":"Kerberos Relogin Period","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"ERROR","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"}],"inputPorts":[{"identifier":"8f63d51f-c67d-335f-a62c-75125384eaef","name":"InputHDFSTransfer","comments":"","position":{"x":176.0,"y":1048.0},"type":"INPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"INPUT_PORT","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"}],"outputPorts":[{"identifier":"d4ad6e22-053c-3577-844c-a12e4c6b16da","name":"OutputHDFSTransfer","comments":"","position":{"x":1264.0,"y":1416.0},"type":"OUTPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"OUTPUT_PORT","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"}],"connections":[{"identifier":"dbc50394-1b06-3c04-8344-f8e5a2007aac","name":"","source":{"id":"2b8bf825-2f90-3f97-889d-8651554b7e1f","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Wait","comments":""},"destination":{"id":"e8a9ea11-cab7-3cca-bcef-1ec58904285d","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"CreateCleansedTableList","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"7d0cb8f9-c0dd-3a12-88d2-e74255153f1d","name":"","source":{"id":"2b8bf825-2f90-3f97-889d-8651554b7e1f","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Wait","comments":""},"destination":{"id":"260d4999-0f61-35a5-83cc-a149200bf40a","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Set Failure Filename","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["expired"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"ac3ff83c-68ba-361e-874b-beb0544636c2","name":"","source":{"id":"e8a9ea11-cab7-3cca-bcef-1ec58904285d","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"CreateCleansedTableList","comments":""},"destination":{"id":"e8a9ea11-cab7-3cca-bcef-1ec58904285d","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"CreateCleansedTableList","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1677.0,"y":1223.0},{"x":1677.0,"y":1273.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"2445dc83-a1ab-326a-83cc-53e9f697748a","name":"","source":{"id":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"SplitText","comments":""},"destination":{"id":"2b8bf825-2f90-3f97-889d-8651554b7e1f","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Wait","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["original"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1384.0,"y":848.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"4e019f9c-f061-3fc7-b1eb-ec75cd14798e","name":"","source":{"id":"111378ea-c181-3f57-b3a8-cd80f60bc193","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Bash Listing of Files","comments":""},"destination":{"id":"ff4adc93-b52d-3053-9c58-c3cad7bf4d62","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Logging - Bash Listing of Files","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"5a673349-c4c4-34fb-b63b-9aefc6e01e09","name":"","source":{"id":"659dd95e-b1ea-39d8-9de7-af720ae7209c","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Extract FlowFile into Attribute","comments":""},"destination":{"id":"dd36fc13-6f67-3b04-a965-8c2656f6a745","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Fetch Data From ADLS Gen 2","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["matched"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"718fb74e-715d-3d19-b271-29fac1d5cfad","name":"","source":{"id":"e8a9ea11-cab7-3cca-bcef-1ec58904285d","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"CreateCleansedTableList","comments":""},"destination":{"id":"d4ad6e22-053c-3577-844c-a12e4c6b16da","type":"OUTPUT_PORT","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"OutputHDFSTransfer","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"56bdfcf8-437b-3fe9-9eda-65f0da5a13b8","name":"","source":{"id":"260d4999-0f61-35a5-83cc-a149200bf40a","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Set Failure Filename","comments":""},"destination":{"id":"7e3223c2-c687-3270-9dea-9ee2d549b44b","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"ERROR - PutFile did not complete","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"0ba679c9-0ca4-3ce9-baea-19f88a0bbc7d","name":"","source":{"id":"964d12c6-797d-3041-8602-aaae20895691","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Set Path Properties","comments":""},"destination":{"id":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Save Data to OnPrem HDFS Staging","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"555b9492-7d18-3259-af35-261d7868ac2b","name":"","source":{"id":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Save Data to OnPrem HDFS Staging","comments":""},"destination":{"id":"4839a3b3-b785-3272-9ffb-87afcdec58e0","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Notify","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"42ab62d2-ee08-3d88-bfdd-61c23fcabe95","name":"","source":{"id":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"SplitText","comments":""},"destination":{"id":"659dd95e-b1ea-39d8-9de7-af720ae7209c","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Extract FlowFile into Attribute","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["splits"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"bc5d22a3-9159-3b6f-8b6e-2657a6242130","name":"","source":{"id":"8f63d51f-c67d-335f-a62c-75125384eaef","type":"INPUT_PORT","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"InputHDFSTransfer","comments":""},"destination":{"id":"111378ea-c181-3f57-b3a8-cd80f60bc193","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Bash Listing of Files","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"859d24f4-3d55-334a-9a49-8e8ef92d07ae","name":"","source":{"id":"dd36fc13-6f67-3b04-a965-8c2656f6a745","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Fetch Data From ADLS Gen 2","comments":""},"destination":{"id":"964d12c6-797d-3041-8602-aaae20895691","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Set Path Properties","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"5e5ee097-3410-31b6-844d-2efb4f63e0f0","name":"","source":{"id":"111378ea-c181-3f57-b3a8-cd80f60bc193","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Bash Listing of Files","comments":""},"destination":{"id":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"SplitText","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"d628c915-2036-3ee0-9e32-f4f2820f6b0a","name":"","source":{"id":"2b8bf825-2f90-3f97-889d-8651554b7e1f","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Wait","comments":""},"destination":{"id":"eec5330a-42d5-394f-9c95-0a3a010cbc71","type":"FUNNEL","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Funnel","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["wait","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1640.0,"y":880.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"dcc63044-0469-32ad-9fce-c8df95cff8a5","name":"","source":{"id":"dd36fc13-6f67-3b04-a965-8c2656f6a745","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Fetch Data From ADLS Gen 2","comments":""},"destination":{"id":"b74ab2cd-678d-3bc4-8259-310dd936f1d7","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Logging - Fetch Data From ADLS Gen 2","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["comms.failure","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"0dd51cd8-d32a-3747-9af2-2181ea2319eb","name":"","source":{"id":"e8a9ea11-cab7-3cca-bcef-1ec58904285d","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"CreateCleansedTableList","comments":""},"destination":{"id":"7c7c0b0d-369d-3976-8784-071bc8aa10a0","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Logging - Create Cleansed Table List","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"b57cc2b4-e60c-3947-b3a9-5ffd686df5f5","name":"","source":{"id":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Save Data to OnPrem HDFS Staging","comments":""},"destination":{"id":"85820c6a-760c-3505-b453-5417ff9ab353","type":"PROCESSOR","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"Logging - Save Data To OnPrem HDFS Staging","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"}],"labels":[{"identifier":"eaefe247-6013-38f0-a5cf-bc384f2233bf","position":{"x":2264.0,"y":1016.0},"label":"If the wait processor expires, this indicates \nthat for a given source system and country \nthe tables that don't need to be detokenised \nwere not saved properly to HDP\n\n\nFrom here, an acknowledgement of the \nfailure will be written to the local file \nsystem. The flow can be replayed to try \nagain from the first processor in this process \ngroup, or from the first processor of the \nwhole flow","width":264.0,"height":160.0,"style":{"background-color":"#cf7fab","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"cf9b1b17-65ee-3af3-be5d-070afc184427","position":{"x":-304.0,"y":744.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"230ce509-08d7-3679-96ca-29a66cadb73e","position":{"x":1696.0,"y":1592.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"b92c2c24-29d2-351f-8d79-ba1289f5a340","position":{"x":944.0,"y":1544.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"492812ae-2a78-34bf-9cf3-5347948aadd4","position":{"x":-32.0,"y":792.0},"label":"Please allow time for \nthe bash script to run","width":128.0,"height":40.0,"style":{"font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"1d99906d-779a-3e56-b7db-9c9bee42fe4f","position":{"x":152.0,"y":720.0},"label":"Restarts for this section of the flow can be \ntriggered from this processor","width":264.0,"height":48.0,"style":{"background-color":"#edd6ff","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"e82f9497-a3b1-3b55-acd7-835afbbc23cc","position":{"x":541.6212307303854,"y":655.4671114329585},"label":"Data Transfer to Staging for Detokenisation","width":496.0,"height":48.0,"style":{"background-color":"#27b9e6","font-size":"24px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"4cf77d0a-a133-3d9f-8bfb-da2623c3dd32","position":{"x":416.0,"y":1456.0},"label":"This needs to be to the staging dir","width":232.0,"height":32.0,"style":{"font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"5b9e1e25-e698-31f5-a153-34a8142f21a4","position":{"x":-208.0,"y":1680.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"}],"funnels":[{"identifier":"eec5330a-42d5-394f-9c95-0a3a010cbc71","position":{"x":1824.0,"y":856.0},"componentType":"FUNNEL","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"}],"controllerServices":[{"identifier":"99d82d2f-be82-3ba2-b9cd-1fcafc4bbafb","name":"DistributedMapCacheClientService_Detokenise","comments":"","type":"org.apache.nifi.distributed.cache.client.DistributedMapCacheClientService","bundle":{"group":"org.apache.nifi","artifact":"nifi-distributed-cache-services-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.distributed.cache.client.DistributedMapCacheClient","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}},{"type":"org.apache.nifi.distributed.cache.client.AtomicDistributedMapCacheClient","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"SSL Context Service":null,"Server Port":"4557","Server Hostname":"nifisit-nifi0.haassit1.hk87-pa28.cloudera.site","Communications Timeout":"30 secs"},"propertyDescriptors":{"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false},"Server Port":{"name":"Server Port","displayName":"Server Port","identifiesControllerService":false,"sensitive":false},"Server Hostname":{"name":"Server Hostname","displayName":"Server Hostname","identifiesControllerService":false,"sensitive":false},"Communications Timeout":{"name":"Communications Timeout","displayName":"Communications Timeout","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"},{"identifier":"c0203483-78a8-38b6-8cb0-ae833bc2f29d","name":"KeytabCredentialsService_SCB_onprem","comments":"","type":"org.apache.nifi.kerberos.KeytabCredentialsService","bundle":{"group":"org.apache.nifi","artifact":"nifi-kerberos-credentials-service-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.kerberos.KerberosCredentialsService","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"Kerberos Keytab":"/hadoopfs/fs1/onprem_hdfs_config/srv_azt1eglrwhaassit.keytab","Kerberos Principal":"srv_azt1eglrwhaassit@ZONE1.SCBDEV.NET"},"propertyDescriptors":{"Kerberos Keytab":{"name":"Kerberos Keytab","displayName":"Kerberos Keytab","identifiesControllerService":false,"sensitive":false},"Kerberos Principal":{"name":"Kerberos Principal","displayName":"Kerberos Principal","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"186dcbcd-4a5c-3c83-9459-f34e9286a97e"}],"variables":{},"flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"XMLParser","comments":"","position":{"x":808.0,"y":864.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"7773c64e-c367-337c-b49a-b27dea943ea3","name":"Extract Params Content to Attribute","comments":"","position":{"x":1448.0,"y":456.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.QueryRecord","properties":{"cache-schema":"true","dbf-default-precision":"10","record-writer":"3e1a8d33-43b6-39a0-b952-20712e47dd84","record-reader":"1ddef3bb-2d7a-34b1-af50-e8cff974d614","include-zero-record-flowfiles":"true","dbf-default-scale":"0","ff_contents":"SELECT * FROM FLOWFILE"},"propertyDescriptors":{"cache-schema":{"name":"cache-schema","displayName":"Cache Schema","identifiesControllerService":false,"sensitive":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false},"record-writer":{"name":"record-writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false},"record-reader":{"name":"record-reader","displayName":"Record Reader","identifiesControllerService":true,"sensitive":false},"include-zero-record-flowfiles":{"name":"include-zero-record-flowfiles","displayName":"Include Zero Record FlowFiles","identifiesControllerService":false,"sensitive":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false},"ff_contents":{"name":"ff_contents","displayName":"ff_contents","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"9aabaff3-58d9-3068-8a24-1eb2f655be23","name":"Evaluate Mappings and Directories","comments":"","position":{"x":760.0,"y":920.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"Delete Attributes Expression":null,"Store State":"Do not store state","canonical-value-lookup-cache-size":"100","storage_staging_dir":"${storage_staging_dir:prepend(${\"hdfs_parent_dir_xml\":append(\"/\")})}","sri_open_staging_dir":"${sri_open_staging_dir:prepend(${\"hdfs_parent_dir_xml\":append(\"/\")})}","Stateful Variables Initial Value":null,"sri_non_open_staging_dir":"${sri_non_open_staging_dir:prepend(${\"hdfs_parent_dir_xml\":append(\"/\")})}","databases_xml":"${db_nonopen_schema:isEmpty():not():and(${db_open_schema:isEmpty():not():or(${db_storage_schema:isEmpty():not()})}):ifElse(\"${db_nonopen_schema},\",${\"db_nonopn_schema\"}):append(${db_open_schema:isEmpty():not():and(${db_storage_schema:isEmpty():not()}):ifElse(\"${db_open_schema},\",${\"db_open_schema\"})}):append(${\"db_storage_schema\"})}"},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"storage_staging_dir":{"name":"storage_staging_dir","displayName":"storage_staging_dir","identifiesControllerService":false,"sensitive":false},"sri_open_staging_dir":{"name":"sri_open_staging_dir","displayName":"sri_open_staging_dir","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false},"sri_non_open_staging_dir":{"name":"sri_non_open_staging_dir","displayName":"sri_non_open_staging_dir","identifiesControllerService":false,"sensitive":false},"databases_xml":{"name":"databases_xml","displayName":"databases_xml","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"a179c50c-94fc-39c6-9e3d-ade057f15f6f","name":"Extract Params Attribute of Interest","comments":"","position":{"x":1448.0,"y":696.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.EvaluateJsonPath","properties":{"Destination":"flowfile-attribute","db_open_schema":"$.property.[*].[?(@.name=='edmhdpif.config.sri.open.schema')].value","path_xml":"$.property.[*].[?(@.name=='edmhdpif.config.path')].value","open_partition_name":"$.property.[*].[?(@.name=='edmhdpif.config.sri.open.partition.name')].value","sourcesystem_xml":"$.property.[*].[?(@.name=='edmhdpif.config.source')].value","db_nonopen_schema":"$.property.[*].[?(@.name=='edmhdpif.config.sri.nonopen.schema')].value","storage_staging_dir":"$.property.[*].[?(@.name=='edmhdpif.config.onperm.staging.storage.dir')].value","sri_open_staging_dir":"$.property.[*].[?(@.name=='edmhdpif.config.onperm.staging.sri.open.dir')].value","Return Type":"json","db_storage_schema":"$.property.[*].[?(@.name=='edmhdpif.config.storage.schema')].value","storage_partition_name":"$.property.[*].[?(@.name=='edmhdpif.config.storage.partition.name')].value","status_file_location_xml":"$.property.[*].[?(@.name=='edmhdpif.config.statusfile.location')].value","Null Value Representation":"empty string","nonopen_partition_name":"$.property.[*].[?(@.name=='edmhdpif.config.sri.nonopen.partition.name')].value","country_xml":"$.property.[*].[?(@.name=='edmhdpif.config.country')].value","consumed_tables_xml":"$.property.[*].[?(@.name=='edmhdpif.config.consumed.tables')].value","kerberos_keytab_xml":"$.property.[*].[?(@.name=='edmhdpif.config.kerberos.keytab.path')].value","Path Not Found Behavior":"ignore","hdfs_parent_dir_xml":"$.property.[*].[?(@.name=='edmhdpif.config.hdfs.data.parent.dir')].value","kerberos_principal_onprem":"$.property.[*].[?(@.name=='edmhdpif.config.onperm.kerberos.principal')].value","nfs_location_xml":"$.property.[*].[?(@.name=='edmhdpif.config.source.nfs.location')].value","kerberos_principal_xml":"$.property.[*].[?(@.name=='edmhdpif.config.kerberos.principal')].value","sri_non_open_staging_dir":"$.property.[*].[?(@.name=='edmhdpif.config.onperm.staging.sri.nonopen.dir')].value","kerberos_keytab_onprem":"$.property.[*].[?(@.name=='edmhdpif.config.onperm.kerberos.keytab.path')].value"},"propertyDescriptors":{"Destination":{"name":"Destination","displayName":"Destination","identifiesControllerService":false,"sensitive":false},"db_open_schema":{"name":"db_open_schema","displayName":"db_open_schema","identifiesControllerService":false,"sensitive":false},"path_xml":{"name":"path_xml","displayName":"path_xml","identifiesControllerService":false,"sensitive":false},"open_partition_name":{"name":"open_partition_name","displayName":"open_partition_name","identifiesControllerService":false,"sensitive":false},"sourcesystem_xml":{"name":"sourcesystem_xml","displayName":"sourcesystem_xml","identifiesControllerService":false,"sensitive":false},"db_nonopen_schema":{"name":"db_nonopen_schema","displayName":"db_nonopen_schema","identifiesControllerService":false,"sensitive":false},"storage_staging_dir":{"name":"storage_staging_dir","displayName":"storage_staging_dir","identifiesControllerService":false,"sensitive":false},"sri_open_staging_dir":{"name":"sri_open_staging_dir","displayName":"sri_open_staging_dir","identifiesControllerService":false,"sensitive":false},"Return Type":{"name":"Return Type","displayName":"Return Type","identifiesControllerService":false,"sensitive":false},"db_storage_schema":{"name":"db_storage_schema","displayName":"db_storage_schema","identifiesControllerService":false,"sensitive":false},"storage_partition_name":{"name":"storage_partition_name","displayName":"storage_partition_name","identifiesControllerService":false,"sensitive":false},"status_file_location_xml":{"name":"status_file_location_xml","displayName":"status_file_location_xml","identifiesControllerService":false,"sensitive":false},"Null Value Representation":{"name":"Null Value Representation","displayName":"Null Value Representation","identifiesControllerService":false,"sensitive":false},"nonopen_partition_name":{"name":"nonopen_partition_name","displayName":"nonopen_partition_name","identifiesControllerService":false,"sensitive":false},"country_xml":{"name":"country_xml","displayName":"country_xml","identifiesControllerService":false,"sensitive":false},"consumed_tables_xml":{"name":"consumed_tables_xml","displayName":"consumed_tables_xml","identifiesControllerService":false,"sensitive":false},"kerberos_keytab_xml":{"name":"kerberos_keytab_xml","displayName":"kerberos_keytab_xml","identifiesControllerService":false,"sensitive":false},"Path Not Found Behavior":{"name":"Path Not Found Behavior","displayName":"Path Not Found Behavior","identifiesControllerService":false,"sensitive":false},"hdfs_parent_dir_xml":{"name":"hdfs_parent_dir_xml","displayName":"hdfs_parent_dir_xml","identifiesControllerService":false,"sensitive":false},"kerberos_principal_onprem":{"name":"kerberos_principal_onprem","displayName":"kerberos_principal_onprem","identifiesControllerService":false,"sensitive":false},"nfs_location_xml":{"name":"nfs_location_xml","displayName":"nfs_location_xml","identifiesControllerService":false,"sensitive":false},"kerberos_principal_xml":{"name":"kerberos_principal_xml","displayName":"kerberos_principal_xml","identifiesControllerService":false,"sensitive":false},"sri_non_open_staging_dir":{"name":"sri_non_open_staging_dir","displayName":"sri_non_open_staging_dir","identifiesControllerService":false,"sensitive":false},"kerberos_keytab_onprem":{"name":"kerberos_keytab_onprem","displayName":"kerberos_keytab_onprem","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure","unmatched"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"ba4318b3-c053-3cf2-8e31-6b1c4621cde5","name":"Logging - Add DB Partition Mapping Attribute","comments":"","position":{"x":248.0,"y":1128.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"150\";-m;\"Reverse Data Copy XML Parser Add DB Partition Mapping Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"61502364-70ea-3ad5-9615-35d7d1809d75","name":"Add DB Partition Mapping Attribute","comments":"","position":{"x":760.0,"y":1128.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-scripting-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.script.ExecuteScript","properties":{"Script File":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/update_mapping_attribute.py","Script Engine":"python","Script Body":null,"Module Directory":null},"propertyDescriptors":{"Script File":{"name":"Script File","displayName":"Script File","identifiesControllerService":false,"sensitive":false},"Script Engine":{"name":"Script Engine","displayName":"Script Engine","identifiesControllerService":false,"sensitive":false},"Script Body":{"name":"Script Body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false},"Module Directory":{"name":"Module Directory","displayName":"Module Directory","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"62f2e49d-6885-3f66-9c5b-89dc6f71b77c","name":"Clean Up Extracted Attributes","comments":"","position":{"x":760.0,"y":696.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"db_open_schema":"${databases:contains('SRI_OPEN'):ifElse(${db_open_schema:jsonPath('$[0]')},\"\"):replaceAll('\\$\\{edmhdpif.config.source\\}',${sourcesystem_xml:jsonPath('$[0]')}):replaceAll('\\$\\{edmhdpif.config.country\\}',${country_xml:jsonPath('$[0]')})}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","open_partition_name":"${open_partition_name:jsonPath('$[0]')}","path_xml":"${path_xml:jsonPath('$[0]')}","sourcesystem_xml":"${sourcesystem_xml:jsonPath('$[0]')}","db_nonopen_schema":"${databases:contains('SRI_NONOPEN'):ifElse(${db_nonopen_schema:jsonPath('$[0]')},\"\"):replaceAll('\\$\\{edmhdpif.config.source\\}',${sourcesystem_xml:jsonPath('$[0]')}):replaceAll('\\$\\{edmhdpif.config.country\\}',${country_xml:jsonPath('$[0]')})}","storage_staging_dir":"${databases:contains('STORAGE'):ifElse(${storage_staging_dir:jsonPath('$[0]')},\"\"):replaceAll('\\$\\{edmhdpif.config.source\\}',${sourcesystem_xml:jsonPath('$[0]')}):replaceAll('\\$\\{edmhdpif.config.country\\}',${country_xml:jsonPath('$[0]')})}","sri_open_staging_dir":"${databases:contains('SRI_OPEN'):ifElse(${sri_open_staging_dir:jsonPath('$[0]')},\"\"):replaceAll('\\$\\{edmhdpif.config.source\\}',${sourcesystem_xml:jsonPath('$[0]')}):replaceAll('\\$\\{edmhdpif.config.country\\}',${country_xml:jsonPath('$[0]')})}","db_storage_schema":"${databases:contains('STORAGE'):ifElse(${db_storage_schema:jsonPath('$[0]')},\"\"):replaceAll('\\$\\{edmhdpif.config.source\\}',${sourcesystem_xml:jsonPath('$[0]')}):replaceAll('\\$\\{edmhdpif.config.country\\}',${country_xml:jsonPath('$[0]')})}","storage_partition_name":"${storage_partition_name:jsonPath('$[0]')}","status_file_location_xml":"${status_file_location_xml:jsonPath('$[0]'):substringBefore('$')}${sourcesystem_xml:jsonPath('$[0]')}/${country_xml:jsonPath('$[0]')}/status","nonopen_partition_name":"${nonopen_partition_name:jsonPath('$[0]')}","Stateful Variables Initial Value":null,"country_xml":"${country_xml:jsonPath('$[0]')}","consumed_tables_xml":"${consumed_tables_xml:jsonPath('$[0]')}","kerberos_keytab_xml":"${kerberos_keytab_xml:jsonPath('$[0]')}","hdfs_parent_dir_xml":"${hdfs_parent_dir_xml:jsonPath('$[0]'):substringBefore('$')}${sourcesystem_xml:jsonPath('$[0]')}/hdata","Delete Attributes Expression":null,"kerberos_principal_onprem":"${kerberos_principal_onprem:jsonPath('$[0]')}","nfs_location_xml":"${nfs_location_xml:jsonPath('$[0]')}","kerberos_principal_xml":"${kerberos_principal_xml:jsonPath('$[0]')}","sri_non_open_staging_dir":"${databases:contains('SRI_NONOPEN'):ifElse(${sri_non_open_staging_dir:jsonPath('$[0]')},\"\"):replaceAll('\\$\\{edmhdpif.config.source\\}',${sourcesystem_xml:jsonPath('$[0]')}):replaceAll('\\$\\{edmhdpif.config.country\\}',${country_xml:jsonPath('$[0]')})}","kerberos_keytab_onprem":"${kerberos_keytab_onprem:jsonPath('$[0]')}"},"propertyDescriptors":{"db_open_schema":{"name":"db_open_schema","displayName":"db_open_schema","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"open_partition_name":{"name":"open_partition_name","displayName":"open_partition_name","identifiesControllerService":false,"sensitive":false},"path_xml":{"name":"path_xml","displayName":"path_xml","identifiesControllerService":false,"sensitive":false},"sourcesystem_xml":{"name":"sourcesystem_xml","displayName":"sourcesystem_xml","identifiesControllerService":false,"sensitive":false},"db_nonopen_schema":{"name":"db_nonopen_schema","displayName":"db_nonopen_schema","identifiesControllerService":false,"sensitive":false},"storage_staging_dir":{"name":"storage_staging_dir","displayName":"storage_staging_dir","identifiesControllerService":false,"sensitive":false},"sri_open_staging_dir":{"name":"sri_open_staging_dir","displayName":"sri_open_staging_dir","identifiesControllerService":false,"sensitive":false},"db_storage_schema":{"name":"db_storage_schema","displayName":"db_storage_schema","identifiesControllerService":false,"sensitive":false},"storage_partition_name":{"name":"storage_partition_name","displayName":"storage_partition_name","identifiesControllerService":false,"sensitive":false},"status_file_location_xml":{"name":"status_file_location_xml","displayName":"status_file_location_xml","identifiesControllerService":false,"sensitive":false},"nonopen_partition_name":{"name":"nonopen_partition_name","displayName":"nonopen_partition_name","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false},"country_xml":{"name":"country_xml","displayName":"country_xml","identifiesControllerService":false,"sensitive":false},"consumed_tables_xml":{"name":"consumed_tables_xml","displayName":"consumed_tables_xml","identifiesControllerService":false,"sensitive":false},"kerberos_keytab_xml":{"name":"kerberos_keytab_xml","displayName":"kerberos_keytab_xml","identifiesControllerService":false,"sensitive":false},"hdfs_parent_dir_xml":{"name":"hdfs_parent_dir_xml","displayName":"hdfs_parent_dir_xml","identifiesControllerService":false,"sensitive":false},"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"kerberos_principal_onprem":{"name":"kerberos_principal_onprem","displayName":"kerberos_principal_onprem","identifiesControllerService":false,"sensitive":false},"nfs_location_xml":{"name":"nfs_location_xml","displayName":"nfs_location_xml","identifiesControllerService":false,"sensitive":false},"kerberos_principal_xml":{"name":"kerberos_principal_xml","displayName":"kerberos_principal_xml","identifiesControllerService":false,"sensitive":false},"sri_non_open_staging_dir":{"name":"sri_non_open_staging_dir","displayName":"sri_non_open_staging_dir","identifiesControllerService":false,"sensitive":false},"kerberos_keytab_onprem":{"name":"kerberos_keytab_onprem","displayName":"kerberos_keytab_onprem","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"}],"inputPorts":[{"identifier":"56737ebe-27cf-3b58-9aa0-99efc2895ca6","name":"XMLParserInput","comments":"","position":{"x":808.0,"y":496.0},"type":"INPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"INPUT_PORT","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"}],"outputPorts":[{"identifier":"12ed7b4e-eca0-33c2-b606-34fc24b149ac","name":"XMLParserOutput","comments":"","position":{"x":816.0,"y":1344.0},"type":"OUTPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"OUTPUT_PORT","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"}],"connections":[{"identifier":"f82f7c33-bdc7-3aac-ad52-3b8bd9391e9d","name":"","source":{"id":"61502364-70ea-3ad5-9615-35d7d1809d75","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Add DB Partition Mapping Attribute","comments":""},"destination":{"id":"ba4318b3-c053-3cf2-8e31-6b1c4621cde5","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Logging - Add DB Partition Mapping Attribute","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"d280fe3e-6690-3bb0-a648-c06deb4c643e","name":"","source":{"id":"9aabaff3-58d9-3068-8a24-1eb2f655be23","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Evaluate Mappings and Directories","comments":""},"destination":{"id":"61502364-70ea-3ad5-9615-35d7d1809d75","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Add DB Partition Mapping Attribute","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"672c1300-f93a-3572-b5b2-9743c9e24aaf","name":"","source":{"id":"62f2e49d-6885-3f66-9c5b-89dc6f71b77c","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Clean Up Extracted Attributes","comments":""},"destination":{"id":"9aabaff3-58d9-3068-8a24-1eb2f655be23","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Evaluate Mappings and Directories","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"a5e39d56-7dee-3532-9e1f-cc8f04b333b7","name":"","source":{"id":"56737ebe-27cf-3b58-9aa0-99efc2895ca6","type":"INPUT_PORT","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"XMLParserInput","comments":""},"destination":{"id":"7773c64e-c367-337c-b49a-b27dea943ea3","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Extract Params Content to Attribute","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"277b1b78-1f31-391b-b12c-df561da70b19","name":"","source":{"id":"7773c64e-c367-337c-b49a-b27dea943ea3","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Extract Params Content to Attribute","comments":""},"destination":{"id":"465eef37-ad26-3c52-8666-6f20ebc72e92","type":"FUNNEL","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Funnel","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"b3b625fd-f0f7-3645-82ab-53dd4ef1bae5","name":"","source":{"id":"a179c50c-94fc-39c6-9e3d-ade057f15f6f","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Extract Params Attribute of Interest","comments":""},"destination":{"id":"62f2e49d-6885-3f66-9c5b-89dc6f71b77c","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Clean Up Extracted Attributes","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["matched"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"d6931449-3270-374e-96a3-3d8efa965f6d","name":"","source":{"id":"61502364-70ea-3ad5-9615-35d7d1809d75","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Add DB Partition Mapping Attribute","comments":""},"destination":{"id":"12ed7b4e-eca0-33c2-b606-34fc24b149ac","type":"OUTPUT_PORT","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"XMLParserOutput","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"b4b7dafc-fd22-3bd5-a321-9da1ddc606db","name":"","source":{"id":"7773c64e-c367-337c-b49a-b27dea943ea3","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Extract Params Content to Attribute","comments":""},"destination":{"id":"a179c50c-94fc-39c6-9e3d-ade057f15f6f","type":"PROCESSOR","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"Extract Params Attribute of Interest","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["ff_contents"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"}],"labels":[{"identifier":"2d5376f9-1201-3c9a-93a6-51e88653adfc","position":{"x":320.0,"y":1088.0},"label":"log","width":80.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"0f4d86e2-c249-369c-bf5a-4cb79ddcdcb7","position":{"x":1144.0,"y":1160.0},"label":"new processor to fix db partition mapping issue","width":312.0,"height":48.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"}],"funnels":[{"identifier":"465eef37-ad26-3c52-8666-6f20ebc72e92","position":{"x":1600.0,"y":304.0},"componentType":"FUNNEL","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"}],"controllerServices":[{"identifier":"3e1a8d33-43b6-39a0-b952-20712e47dd84","name":"JsonRecordSetWriter_CloudToHDP","comments":"","type":"org.apache.nifi.json.JsonRecordSetWriter","bundle":{"group":"org.apache.nifi","artifact":"nifi-record-serialization-services-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.serialization.RecordSetWriterFactory","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"schema-branch":null,"compression-level":"1","schema-cache":null,"Timestamp Format":null,"Date Format":null,"Pretty Print JSON":"false","compression-format":"none","Schema Write Strategy":"full-schema-attribute","suppress-nulls":"never-suppress","output-grouping":"output-oneline","schema-name":"${schema.name}","schema-registry":null,"Time Format":null,"schema-access-strategy":"inherit-record-schema","schema-protocol-version":"1","schema-version":null,"schema-text":"${avro.schema}"},"propertyDescriptors":{"schema-branch":{"name":"schema-branch","displayName":"Schema Branch","identifiesControllerService":false,"sensitive":false},"compression-level":{"name":"compression-level","displayName":"Compression Level","identifiesControllerService":false,"sensitive":false},"schema-cache":{"name":"schema-cache","displayName":"Schema Cache","identifiesControllerService":true,"sensitive":false},"Timestamp Format":{"name":"Timestamp Format","displayName":"Timestamp Format","identifiesControllerService":false,"sensitive":false},"Date Format":{"name":"Date Format","displayName":"Date Format","identifiesControllerService":false,"sensitive":false},"Pretty Print JSON":{"name":"Pretty Print JSON","displayName":"Pretty Print JSON","identifiesControllerService":false,"sensitive":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false},"Schema Write Strategy":{"name":"Schema Write Strategy","displayName":"Schema Write Strategy","identifiesControllerService":false,"sensitive":false},"suppress-nulls":{"name":"suppress-nulls","displayName":"Suppress Null Values","identifiesControllerService":false,"sensitive":false},"output-grouping":{"name":"output-grouping","displayName":"Output Grouping","identifiesControllerService":false,"sensitive":false},"schema-name":{"name":"schema-name","displayName":"Schema Name","identifiesControllerService":false,"sensitive":false},"schema-registry":{"name":"schema-registry","displayName":"Schema Registry","identifiesControllerService":true,"sensitive":false},"Time Format":{"name":"Time Format","displayName":"Time Format","identifiesControllerService":false,"sensitive":false},"schema-access-strategy":{"name":"schema-access-strategy","displayName":"Schema Access Strategy","identifiesControllerService":false,"sensitive":false},"schema-protocol-version":{"name":"schema-protocol-version","displayName":"Schema Protocol Version","identifiesControllerService":false,"sensitive":false},"schema-version":{"name":"schema-version","displayName":"Schema Version","identifiesControllerService":false,"sensitive":false},"schema-text":{"name":"schema-text","displayName":"Schema Text","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"},{"identifier":"1ddef3bb-2d7a-34b1-af50-e8cff974d614","name":"XMLReader_CloudToHDP","comments":"","type":"org.apache.nifi.xml.XMLReader","bundle":{"group":"org.apache.nifi","artifact":"nifi-record-serialization-services-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.serialization.RecordReaderFactory","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"content_field_name":null,"schema-branch":null,"Timestamp Format":null,"schema-inference-cache":null,"Date Format":null,"record_format":"false","attribute_prefix":null,"schema-name":"${schema.name}","schema-registry":null,"Time Format":null,"schema-access-strategy":"schema-text-property","schema-version":null,"schema-text":"{\n\"namespace\": \"nifi\",\n\"name\": \"configuration\",\n\"type\": \"record\",\n\"fields\": [\n{ \"name\": \"property\",\n\"type\": {\n\"type\": \"array\",\n\"items\": {\n\"name\": \"RecordInArray\",\n\"type\": \"record\",\n\"fields\" : [\n{\"name\": \"name\", \"type\": \"string\"},\n{\"name\": \"value\", \"type\": \"string\"}\n]\n}}}\n]\n}"},"propertyDescriptors":{"content_field_name":{"name":"content_field_name","displayName":"Field Name for Content","identifiesControllerService":false,"sensitive":false},"schema-branch":{"name":"schema-branch","displayName":"Schema Branch","identifiesControllerService":false,"sensitive":false},"Timestamp Format":{"name":"Timestamp Format","displayName":"Timestamp Format","identifiesControllerService":false,"sensitive":false},"schema-inference-cache":{"name":"schema-inference-cache","displayName":"Schema Inference Cache","identifiesControllerService":true,"sensitive":false},"Date Format":{"name":"Date Format","displayName":"Date Format","identifiesControllerService":false,"sensitive":false},"record_format":{"name":"record_format","displayName":"Expect Records as Array","identifiesControllerService":false,"sensitive":false},"attribute_prefix":{"name":"attribute_prefix","displayName":"Attribute Prefix","identifiesControllerService":false,"sensitive":false},"schema-name":{"name":"schema-name","displayName":"Schema Name","identifiesControllerService":false,"sensitive":false},"schema-registry":{"name":"schema-registry","displayName":"Schema Registry","identifiesControllerService":true,"sensitive":false},"Time Format":{"name":"Time Format","displayName":"Time Format","identifiesControllerService":false,"sensitive":false},"schema-access-strategy":{"name":"schema-access-strategy","displayName":"Schema Access Strategy","identifiesControllerService":false,"sensitive":false},"schema-version":{"name":"schema-version","displayName":"Schema Version","identifiesControllerService":false,"sensitive":false},"schema-text":{"name":"schema-text","displayName":"Schema Text","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"809a55ff-ed21-3f31-8a72-a5de22e93164"}],"variables":{},"flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"CoreSite XMLParser","comments":"","position":{"x":760.0,"y":416.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"80f493f1-b951-37e1-81bd-44d06ec75c60","name":"Fetch core-site.xml","comments":"","position":{"x":1416.0,"y":456.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.FetchFile","properties":{"Move Conflict Strategy":"Rename","Log level when file not found":"ERROR","Move Destination Directory":null,"Log level when permission denied":"ERROR","File to Fetch":"/etc/hadoop/conf.cloudera.core_settings/core-site.xml","Completion Strategy":"None"},"propertyDescriptors":{"Move Conflict Strategy":{"name":"Move Conflict Strategy","displayName":"Move Conflict Strategy","identifiesControllerService":false,"sensitive":false},"Log level when file not found":{"name":"Log level when file not found","displayName":"Log level when file not found","identifiesControllerService":false,"sensitive":false},"Move Destination Directory":{"name":"Move Destination Directory","displayName":"Move Destination Directory","identifiesControllerService":false,"sensitive":false},"Log level when permission denied":{"name":"Log level when permission denied","displayName":"Log level when permission denied","identifiesControllerService":false,"sensitive":false},"File to Fetch":{"name":"File to Fetch","displayName":"File to Fetch","identifiesControllerService":false,"sensitive":false},"Completion Strategy":{"name":"Completion Strategy","displayName":"Completion Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"e116e536-b1aa-3316-9372-141342d445f9","name":"Evaluate Attributes of Interest","comments":"","position":{"x":1416.0,"y":864.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.EvaluateJsonPath","properties":{"Destination":"flowfile-attribute","Return Type":"json","Null Value Representation":"empty string","abfs_location":"$.property.[*].[?(@.name=='fs.defaultFS')].value","Path Not Found Behavior":"ignore"},"propertyDescriptors":{"Destination":{"name":"Destination","displayName":"Destination","identifiesControllerService":false,"sensitive":false},"Return Type":{"name":"Return Type","displayName":"Return Type","identifiesControllerService":false,"sensitive":false},"Null Value Representation":{"name":"Null Value Representation","displayName":"Null Value Representation","identifiesControllerService":false,"sensitive":false},"abfs_location":{"name":"abfs_location","displayName":"abfs_location","identifiesControllerService":false,"sensitive":false},"Path Not Found Behavior":{"name":"Path Not Found Behavior","displayName":"Path Not Found Behavior","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure","unmatched"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"06ba199d-0455-3676-b129-685e52fc1f06","name":"Extract Values to Attribute","comments":"","position":{"x":1416.0,"y":664.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.QueryRecord","properties":{"cache-schema":"true","dbf-default-precision":"10","record-writer":"c66c8c16-5c3a-3bfb-b687-cd14e7f7ac82","record-reader":"cbae2f01-03e8-3cdf-976e-9f3cc262169b","include-zero-record-flowfiles":"true","dbf-default-scale":"0","ff_contents":"SELECT * FROM FLOWFILE"},"propertyDescriptors":{"cache-schema":{"name":"cache-schema","displayName":"Cache Schema","identifiesControllerService":false,"sensitive":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false},"record-writer":{"name":"record-writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false},"record-reader":{"name":"record-reader","displayName":"Record Reader","identifiesControllerService":true,"sensitive":false},"include-zero-record-flowfiles":{"name":"include-zero-record-flowfiles","displayName":"Include Zero Record FlowFiles","identifiesControllerService":false,"sensitive":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false},"ff_contents":{"name":"ff_contents","displayName":"ff_contents","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"cb3e1b95-2a8f-37fc-b6f1-ab113a4c8589","name":"Cleanse Extracted Attributes","comments":"","position":{"x":768.0,"y":864.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"Delete Attributes Expression":null,"Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null,"abfs_filesystem":"${abfs_location:jsonPath('$[0]'):substringAfter(\"/\")}","abfs_location":"${abfs_location:jsonPath('$[0]'):substringBeforeLast(\"/\")}"},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false},"abfs_filesystem":{"name":"abfs_filesystem","displayName":"abfs_filesystem","identifiesControllerService":false,"sensitive":false},"abfs_location":{"name":"abfs_location","displayName":"abfs_location","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"}],"inputPorts":[{"identifier":"f99cb23e-7e85-3b5d-b554-75d5405f4fcb","name":"XMLParserInput","comments":"","position":{"x":808.0,"y":496.0},"type":"INPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"INPUT_PORT","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"}],"outputPorts":[{"identifier":"bc23cef4-b09e-37da-8130-78228b0287af","name":"XMLParserOutput","comments":"","position":{"x":816.0,"y":1080.0},"type":"OUTPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"OUTPUT_PORT","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"}],"connections":[{"identifier":"d01b4d18-5aab-32fe-a9e4-9d2d8cbbe8ad","name":"","source":{"id":"f99cb23e-7e85-3b5d-b554-75d5405f4fcb","type":"INPUT_PORT","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"XMLParserInput","comments":""},"destination":{"id":"80f493f1-b951-37e1-81bd-44d06ec75c60","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Fetch core-site.xml","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"f106aad5-41d9-3fc7-b1e8-f2ad898e053c","name":"","source":{"id":"06ba199d-0455-3676-b129-685e52fc1f06","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Extract Values to Attribute","comments":""},"destination":{"id":"e116e536-b1aa-3316-9372-141342d445f9","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Evaluate Attributes of Interest","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["ff_contents"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"28c65090-dba9-3d75-be05-5c8e771c4105","name":"","source":{"id":"e116e536-b1aa-3316-9372-141342d445f9","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Evaluate Attributes of Interest","comments":""},"destination":{"id":"cb3e1b95-2a8f-37fc-b6f1-ab113a4c8589","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Cleanse Extracted Attributes","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["matched"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"d1724909-25c7-3339-bb41-0f7098c22067","name":"","source":{"id":"80f493f1-b951-37e1-81bd-44d06ec75c60","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Fetch core-site.xml","comments":""},"destination":{"id":"58fd51a3-3b4b-39fd-8bd2-f64d2b66b0f5","type":"FUNNEL","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Funnel","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure","permission.denied","not.found"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"6b5b9819-0795-3ccf-a2f1-c9beb79d4214","name":"","source":{"id":"80f493f1-b951-37e1-81bd-44d06ec75c60","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Fetch core-site.xml","comments":""},"destination":{"id":"06ba199d-0455-3676-b129-685e52fc1f06","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Extract Values to Attribute","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"98171db5-6068-367b-88f5-ab3c13f2952f","name":"","source":{"id":"cb3e1b95-2a8f-37fc-b6f1-ab113a4c8589","type":"PROCESSOR","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"Cleanse Extracted Attributes","comments":""},"destination":{"id":"bc23cef4-b09e-37da-8130-78228b0287af","type":"OUTPUT_PORT","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"XMLParserOutput","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"}],"labels":[],"funnels":[{"identifier":"58fd51a3-3b4b-39fd-8bd2-f64d2b66b0f5","position":{"x":2112.0,"y":496.0},"componentType":"FUNNEL","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"}],"controllerServices":[{"identifier":"c66c8c16-5c3a-3bfb-b687-cd14e7f7ac82","name":"JsonRecordSetWriter_coresite","comments":"","type":"org.apache.nifi.json.JsonRecordSetWriter","bundle":{"group":"org.apache.nifi","artifact":"nifi-record-serialization-services-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.serialization.RecordSetWriterFactory","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"schema-branch":null,"compression-level":"1","schema-cache":null,"Timestamp Format":null,"Date Format":null,"Pretty Print JSON":"false","compression-format":"none","Schema Write Strategy":"full-schema-attribute","suppress-nulls":"never-suppress","output-grouping":"output-oneline","schema-name":"${schema.name}","schema-registry":null,"Time Format":null,"schema-access-strategy":"inherit-record-schema","schema-protocol-version":"1","schema-version":null,"schema-text":"${avro.schema}"},"propertyDescriptors":{"schema-branch":{"name":"schema-branch","displayName":"Schema Branch","identifiesControllerService":false,"sensitive":false},"compression-level":{"name":"compression-level","displayName":"Compression Level","identifiesControllerService":false,"sensitive":false},"schema-cache":{"name":"schema-cache","displayName":"Schema Cache","identifiesControllerService":true,"sensitive":false},"Timestamp Format":{"name":"Timestamp Format","displayName":"Timestamp Format","identifiesControllerService":false,"sensitive":false},"Date Format":{"name":"Date Format","displayName":"Date Format","identifiesControllerService":false,"sensitive":false},"Pretty Print JSON":{"name":"Pretty Print JSON","displayName":"Pretty Print JSON","identifiesControllerService":false,"sensitive":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false},"Schema Write Strategy":{"name":"Schema Write Strategy","displayName":"Schema Write Strategy","identifiesControllerService":false,"sensitive":false},"suppress-nulls":{"name":"suppress-nulls","displayName":"Suppress Null Values","identifiesControllerService":false,"sensitive":false},"output-grouping":{"name":"output-grouping","displayName":"Output Grouping","identifiesControllerService":false,"sensitive":false},"schema-name":{"name":"schema-name","displayName":"Schema Name","identifiesControllerService":false,"sensitive":false},"schema-registry":{"name":"schema-registry","displayName":"Schema Registry","identifiesControllerService":true,"sensitive":false},"Time Format":{"name":"Time Format","displayName":"Time Format","identifiesControllerService":false,"sensitive":false},"schema-access-strategy":{"name":"schema-access-strategy","displayName":"Schema Access Strategy","identifiesControllerService":false,"sensitive":false},"schema-protocol-version":{"name":"schema-protocol-version","displayName":"Schema Protocol Version","identifiesControllerService":false,"sensitive":false},"schema-version":{"name":"schema-version","displayName":"Schema Version","identifiesControllerService":false,"sensitive":false},"schema-text":{"name":"schema-text","displayName":"Schema Text","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"},{"identifier":"cbae2f01-03e8-3cdf-976e-9f3cc262169b","name":"XMLReader_coresite","comments":"","type":"org.apache.nifi.xml.XMLReader","bundle":{"group":"org.apache.nifi","artifact":"nifi-record-serialization-services-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.serialization.RecordReaderFactory","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"content_field_name":null,"schema-branch":null,"Timestamp Format":null,"schema-inference-cache":null,"Date Format":null,"record_format":"false","attribute_prefix":null,"schema-name":"${schema.name}","schema-registry":null,"Time Format":null,"schema-access-strategy":"schema-text-property","schema-version":null,"schema-text":"{\n\"namespace\": \"nifi\",\n\"name\": \"configuration\",\n\"type\": \"record\",\n\"fields\": [\n{ \"name\": \"property\",\n\"type\": {\n\"type\": \"array\",\n\"items\": {\n\"name\": \"RecordInArray\",\n\"type\": \"record\",\n\"fields\" : [\n{\"name\": \"name\", \"type\": \"string\"},\n{\"name\": \"value\", \"type\": \"string\"}\n]\n}}}\n]\n}"},"propertyDescriptors":{"content_field_name":{"name":"content_field_name","displayName":"Field Name for Content","identifiesControllerService":false,"sensitive":false},"schema-branch":{"name":"schema-branch","displayName":"Schema Branch","identifiesControllerService":false,"sensitive":false},"Timestamp Format":{"name":"Timestamp Format","displayName":"Timestamp Format","identifiesControllerService":false,"sensitive":false},"schema-inference-cache":{"name":"schema-inference-cache","displayName":"Schema Inference Cache","identifiesControllerService":true,"sensitive":false},"Date Format":{"name":"Date Format","displayName":"Date Format","identifiesControllerService":false,"sensitive":false},"record_format":{"name":"record_format","displayName":"Expect Records as Array","identifiesControllerService":false,"sensitive":false},"attribute_prefix":{"name":"attribute_prefix","displayName":"Attribute Prefix","identifiesControllerService":false,"sensitive":false},"schema-name":{"name":"schema-name","displayName":"Schema Name","identifiesControllerService":false,"sensitive":false},"schema-registry":{"name":"schema-registry","displayName":"Schema Registry","identifiesControllerService":true,"sensitive":false},"Time Format":{"name":"Time Format","displayName":"Time Format","identifiesControllerService":false,"sensitive":false},"schema-access-strategy":{"name":"schema-access-strategy","displayName":"Schema Access Strategy","identifiesControllerService":false,"sensitive":false},"schema-version":{"name":"schema-version","displayName":"Schema Version","identifiesControllerService":false,"sensitive":false},"schema-text":{"name":"schema-text","displayName":"Schema Text","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"231d8fce-4595-36f9-9381-8d55f5f5c00c"}],"variables":{},"flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"HDFS Direct Transfer","comments":"","position":{"x":1144.0,"y":1136.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"c5939a7c-0ad8-30bd-9ef7-914b94876408","name":"Set Failure Filename","comments":"","position":{"x":1936.0,"y":984.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"Delete Attributes Expression":null,"filename":"${\"sourcesystem\"}_${\"country\"}_failed_plain_onprem_save_${\"partition\"}.ack","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"3ca0c731-6c77-3407-8d55-f5fa7e06e53d","name":"ERROR - PutFile did not complete","comments":"","position":{"x":1936.0,"y":1216.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.PutFile","properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"${\"nfs_location_xml\"}/${\"sourcesystem_xml\"}/${\"country_xml\"}/nifi_status/saving_error/","Conflict Resolution Strategy":"fail"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"861683ef-30f8-3b8d-91b9-9a53a8803469","name":"Notify","comments":"","position":{"x":136.0,"y":1560.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{"background-color":"#2bc265"},"type":"org.apache.nifi.processors.standard.Notify","properties":{"signal-counter-delta":"1","distributed-cache-service":"e79265a6-062d-3115-9e8c-f07ee663f640","signal-buffer-count":"1","release-signal-id":"${fragment.identifier}","signal-counter-name":"scb_ingest_plain","attribute-cache-regex":null},"propertyDescriptors":{"signal-counter-delta":{"name":"signal-counter-delta","displayName":"Signal Counter Delta","identifiesControllerService":false,"sensitive":false},"distributed-cache-service":{"name":"distributed-cache-service","displayName":"Distributed Cache Service","identifiesControllerService":true,"sensitive":false},"signal-buffer-count":{"name":"signal-buffer-count","displayName":"Signal Buffer Count","identifiesControllerService":false,"sensitive":false},"release-signal-id":{"name":"release-signal-id","displayName":"Release Signal Identifier","identifiesControllerService":false,"sensitive":false},"signal-counter-name":{"name":"signal-counter-name","displayName":"Signal Counter Name","identifiesControllerService":false,"sensitive":false},"attribute-cache-regex":{"name":"attribute-cache-regex","displayName":"Attribute Cache Regex","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"29465ddc-abf9-3b6d-9ff2-df12cc811f68","name":"Logging - Create Metadata Update SQL","comments":"","position":{"x":1536.0,"y":1392.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"149\";-m;\"Reverse Data Copy HDFS Direct Transfer Create Metadata Update SQL Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"e244f5c1-4809-32a8-8d9f-acaca2dd1831","name":"FetchCDPObjectStore","comments":"","position":{"x":744.0,"y":1168.0},"bundle":{"group":"com.cloudera","artifact":"nifi-cdf-objectstore-nar","version":"1.0.0.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.hadoop.FetchCDPObjectStore","properties":{"kerberos-credentials-service":"6bb8ec34-4727-3d4c-abed-8981068394d8","filename":"${\"azure_full_path\"}","cdp-storage-location":null,"Kerberos Principal":null},"propertyDescriptors":{"kerberos-credentials-service":{"name":"kerberos-credentials-service","displayName":"Kerberos Credentials Service","identifiesControllerService":true,"sensitive":false},"filename":{"name":"filename","displayName":"Filename","identifiesControllerService":false,"sensitive":false},"Kerberos Password":{"name":"Kerberos Password","displayName":"CDP Password","identifiesControllerService":false,"sensitive":true},"cdp-storage-location":{"name":"cdp-storage-location","displayName":"Storage Location","identifiesControllerService":false,"sensitive":false},"Kerberos Principal":{"name":"Kerberos Principal","displayName":"CDP Username","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"111378ea-c181-3f57-b3a8-cd80f60bc193","name":"Bash Listing of Files","comments":"","position":{"x":120.0,"y":784.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/list_files.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-b;${\"hdfs_parent_dir_xml\"};-d;${\"databases_xml\"};-t;${\"consumed_tables_xml\"};-m;${\"db_partition_map\"};-u;${\"kerberos_principal_xml\"};-k;${\"kerberos_keytab_xml\"};-p;${\"partition\"};-f\"p\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"f515d7ce-c8c2-3a7f-b3e6-50bf20e6b16d","name":"Logging - Save Data to OnPrem HDFS","comments":"","position":{"x":-552.0,"y":1376.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"148\";-m;\"Reverse Data Copy HDFS Direct Transfer Save Data of Plain Tables To OnPrem HDFS Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"cc56e64f-869a-3aee-a1b3-cfeac8a883c7","name":"Logging - Bash Listing of Files","comments":"","position":{"x":-496.0,"y":784.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"146\";-m;\"Reverse Data Copy HDFS Direct Transfer List of Plain Tables File Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","name":"SplitText","comments":"","position":{"x":752.0,"y":784.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.SplitText","properties":{"Remove Trailing Newlines":"true","Maximum Fragment Size":null,"Header Line Marker Characters":null,"Header Line Count":"0","Line Split Count":"1"},"propertyDescriptors":{"Remove Trailing Newlines":{"name":"Remove Trailing Newlines","displayName":"Remove Trailing Newlines","identifiesControllerService":false,"sensitive":false},"Maximum Fragment Size":{"name":"Maximum Fragment Size","displayName":"Maximum Fragment Size","identifiesControllerService":false,"sensitive":false},"Header Line Marker Characters":{"name":"Header Line Marker Characters","displayName":"Header Line Marker Characters","identifiesControllerService":false,"sensitive":false},"Header Line Count":{"name":"Header Line Count","displayName":"Header Line Count","identifiesControllerService":false,"sensitive":false},"Line Split Count":{"name":"Line Split Count","displayName":"Line Split Count","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"659dd95e-b1ea-39d8-9de7-af720ae7209c","name":"Extract Text to Attributes","comments":"","position":{"x":752.0,"y":984.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExtractText","properties":{"Enable Unicode Predefined Character Classes":"false","Permit Whitespace and Comments in Pattern":"false","Enable Unicode-aware Case Folding":"false","Enable DOTALL Mode":"false","Enable Unix Lines Mode":"false","extract-text-enable-named-groups":"false","Maximum Buffer Size":"1 MB","Enable Canonical Equivalence":"false","Enable Case-insensitive Matching":"false","Enable Multiline Mode":"false","azure_full_path":"(.*)","Maximum Capture Group Length":"1024","Enable Literal Parsing of the Pattern":"false","Character Set":"UTF-8","Include Capture Group 0":"true","extract-text-enable-repeating-capture-group":"false"},"propertyDescriptors":{"Enable Unicode Predefined Character Classes":{"name":"Enable Unicode Predefined Character Classes","displayName":"Enable Unicode Predefined Character Classes","identifiesControllerService":false,"sensitive":false},"Permit Whitespace and Comments in Pattern":{"name":"Permit Whitespace and Comments in Pattern","displayName":"Permit Whitespace and Comments in Pattern","identifiesControllerService":false,"sensitive":false},"Enable Unicode-aware Case Folding":{"name":"Enable Unicode-aware Case Folding","displayName":"Enable Unicode-aware Case Folding","identifiesControllerService":false,"sensitive":false},"Enable DOTALL Mode":{"name":"Enable DOTALL Mode","displayName":"Enable DOTALL Mode","identifiesControllerService":false,"sensitive":false},"Enable Unix Lines Mode":{"name":"Enable Unix Lines Mode","displayName":"Enable Unix Lines Mode","identifiesControllerService":false,"sensitive":false},"extract-text-enable-named-groups":{"name":"extract-text-enable-named-groups","displayName":"extract-text-enable-named-groups","identifiesControllerService":false,"sensitive":false},"Maximum Buffer Size":{"name":"Maximum Buffer Size","displayName":"Maximum Buffer Size","identifiesControllerService":false,"sensitive":false},"Enable Canonical Equivalence":{"name":"Enable Canonical Equivalence","displayName":"Enable Canonical Equivalence","identifiesControllerService":false,"sensitive":false},"Enable Case-insensitive Matching":{"name":"Enable Case-insensitive Matching","displayName":"Enable Case-insensitive Matching","identifiesControllerService":false,"sensitive":false},"Enable Multiline Mode":{"name":"Enable Multiline Mode","displayName":"Enable Multiline Mode","identifiesControllerService":false,"sensitive":false},"azure_full_path":{"name":"azure_full_path","displayName":"azure_full_path","identifiesControllerService":false,"sensitive":false},"Maximum Capture Group Length":{"name":"Maximum Capture Group Length","displayName":"Maximum Capture Group Length","identifiesControllerService":false,"sensitive":false},"Enable Literal Parsing of the Pattern":{"name":"Enable Literal Parsing of the Pattern","displayName":"Enable Literal Parsing of the Pattern","identifiesControllerService":false,"sensitive":false},"Character Set":{"name":"Character Set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false},"Include Capture Group 0":{"name":"Include Capture Group 0","displayName":"Include Capture Group 0","identifiesControllerService":false,"sensitive":false},"extract-text-enable-repeating-capture-group":{"name":"extract-text-enable-repeating-capture-group","displayName":"Enable repeating capture group","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["unmatched"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"79d6ed56-4f5e-3974-9aaa-e3e4eb089530","name":"Set Path Properties","comments":"","position":{"x":136.0,"y":1176.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"Delete Attributes Expression":null,"filename":"${azure_full_path:substringAfterLast(\"/\")}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","target_dir":"${azure_full_path:substringBeforeLast(\"/\")}","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"target_dir":{"name":"target_dir","displayName":"target_dir","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"346daf70-3a56-365a-a592-bf2a2b2d96a6","name":"Wait","comments":"","position":{"x":1184.0,"y":984.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{"background-color":"#2bc265"},"type":"org.apache.nifi.processors.standard.Wait","properties":{"wait-buffer-count":"1","wait-mode":"keep","attribute-copy-mode":"keeporiginal","distributed-cache-service":"e79265a6-062d-3115-9e8c-f07ee663f640","releasable-flowfile-count":"1","release-signal-id":"${fragment.identifier}","signal-counter-name":"scb_ingest_plain","expiration-duration":"120 mins","target-signal-count":"${fragment.count}","wait-penalty-duration":null},"propertyDescriptors":{"wait-buffer-count":{"name":"wait-buffer-count","displayName":"Wait Buffer Count","identifiesControllerService":false,"sensitive":false},"wait-mode":{"name":"wait-mode","displayName":"Wait Mode","identifiesControllerService":false,"sensitive":false},"attribute-copy-mode":{"name":"attribute-copy-mode","displayName":"Attribute Copy Mode","identifiesControllerService":false,"sensitive":false},"distributed-cache-service":{"name":"distributed-cache-service","displayName":"Distributed Cache Service","identifiesControllerService":true,"sensitive":false},"releasable-flowfile-count":{"name":"releasable-flowfile-count","displayName":"Releasable FlowFile Count","identifiesControllerService":false,"sensitive":false},"release-signal-id":{"name":"release-signal-id","displayName":"Release Signal Identifier","identifiesControllerService":false,"sensitive":false},"signal-counter-name":{"name":"signal-counter-name","displayName":"Signal Counter Name","identifiesControllerService":false,"sensitive":false},"expiration-duration":{"name":"expiration-duration","displayName":"Expiration Duration","identifiesControllerService":false,"sensitive":false},"target-signal-count":{"name":"target-signal-count","displayName":"Target Signal Count","identifiesControllerService":false,"sensitive":false},"wait-penalty-duration":{"name":"wait-penalty-duration","displayName":"Wait Penalty Duration","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"d1c3276e-2c6a-3faa-a9dc-7575fa16ad97","name":"Create Metadata Update SQL","comments":"","position":{"x":1184.0,"y":1176.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-scripting-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.script.ExecuteScript","properties":{"Script File":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/create_metadata_update_sql.py","Script Engine":"python","Script Body":null,"Module Directory":null},"propertyDescriptors":{"Script File":{"name":"Script File","displayName":"Script File","identifiesControllerService":false,"sensitive":false},"Script Engine":{"name":"Script Engine","displayName":"Script Engine","identifiesControllerService":false,"sensitive":false},"Script Body":{"name":"Script Body","displayName":"Script Body","identifiesControllerService":false,"sensitive":false},"Module Directory":{"name":"Module Directory","displayName":"Module Directory","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","name":"Save Data to OnPrem HDFS","comments":"","position":{"x":136.0,"y":1368.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-hadoop-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.hadoop.PutHDFS","properties":{"Permissions umask":null,"Hadoop Configuration Resources":"/hadoopfs/fs1/onprem_hdfs_config/core-site.xml,/hadoopfs/fs1/onprem_hdfs_config/hdfs-site.xml","Remote Owner":null,"Additional Classpath Resources":null,"Compression codec":"NONE","IO Buffer Size":null,"Remote Group":null,"Block Size":null,"kerberos-credentials-service":"0534102f-790c-3b4a-bc91-72f832e16dd8","Kerberos Keytab":null,"Ignore Locality":"false","Kerberos Principal":null,"Replication":null,"kerberos-user-service":null,"writing-strategy":"writeAndRename","Kerberos Relogin Period":"4 hours","Directory":"${\"target_dir\"}","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Permissions umask":{"name":"Permissions umask","displayName":"Permissions umask","identifiesControllerService":false,"sensitive":false},"Hadoop Configuration Resources":{"name":"Hadoop Configuration Resources","displayName":"Hadoop Configuration Resources","identifiesControllerService":false,"sensitive":false},"Remote Owner":{"name":"Remote Owner","displayName":"Remote Owner","identifiesControllerService":false,"sensitive":false},"Additional Classpath Resources":{"name":"Additional Classpath Resources","displayName":"Additional Classpath Resources","identifiesControllerService":false,"sensitive":false},"Compression codec":{"name":"Compression codec","displayName":"Compression codec","identifiesControllerService":false,"sensitive":false},"IO Buffer Size":{"name":"IO Buffer Size","displayName":"IO Buffer Size","identifiesControllerService":false,"sensitive":false},"Remote Group":{"name":"Remote Group","displayName":"Remote Group","identifiesControllerService":false,"sensitive":false},"Block Size":{"name":"Block Size","displayName":"Block Size","identifiesControllerService":false,"sensitive":false},"kerberos-credentials-service":{"name":"kerberos-credentials-service","displayName":"Kerberos Credentials Service","identifiesControllerService":true,"sensitive":false},"Kerberos Password":{"name":"Kerberos Password","displayName":"Kerberos Password","identifiesControllerService":false,"sensitive":true},"Kerberos Keytab":{"name":"Kerberos Keytab","displayName":"Kerberos Keytab","identifiesControllerService":false,"sensitive":false},"Ignore Locality":{"name":"Ignore Locality","displayName":"Ignore Locality","identifiesControllerService":false,"sensitive":false},"Kerberos Principal":{"name":"Kerberos Principal","displayName":"Kerberos Principal","identifiesControllerService":false,"sensitive":false},"Replication":{"name":"Replication","displayName":"Replication","identifiesControllerService":false,"sensitive":false},"kerberos-user-service":{"name":"kerberos-user-service","displayName":"Kerberos User Service","identifiesControllerService":true,"sensitive":false},"writing-strategy":{"name":"writing-strategy","displayName":"writing-strategy","identifiesControllerService":false,"sensitive":false},"Kerberos Relogin Period":{"name":"Kerberos Relogin Period","displayName":"Kerberos Relogin Period","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"ERROR","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"7c6f11fc-e52b-3571-b3fb-ee21e695440a","name":"Logging - Fetch CDP Object Store","comments":"","position":{"x":744.0,"y":1520.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"147\";-m;\"Reverse Data Copy HDFS Direct Transfer Fetch CDP Object Store Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"}],"inputPorts":[{"identifier":"8f63d51f-c67d-335f-a62c-75125384eaef","name":"InputHDFSTransfer","comments":"","position":{"x":176.0,"y":1048.0},"type":"INPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"INPUT_PORT","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"}],"outputPorts":[{"identifier":"ce24d645-590a-3395-b96b-58f13bed8199","name":"OutputToHive","comments":"","position":{"x":1176.0,"y":1464.0},"type":"OUTPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"OUTPUT_PORT","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"}],"connections":[{"identifier":"5b45c616-9f31-3fa8-a752-e88c910b39f0","name":"","source":{"id":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"SplitText","comments":""},"destination":{"id":"346daf70-3a56-365a-a592-bf2a2b2d96a6","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Wait","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["original"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1360.0,"y":848.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"ded96353-977e-3ed7-b4f3-711b6f78e725","name":"","source":{"id":"346daf70-3a56-365a-a592-bf2a2b2d96a6","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Wait","comments":""},"destination":{"id":"d1c3276e-2c6a-3faa-a9dc-7575fa16ad97","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Create Metadata Update SQL","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"5dd6d7fb-2d3a-376a-aeec-efee677e5f12","name":"","source":{"id":"659dd95e-b1ea-39d8-9de7-af720ae7209c","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Extract Text to Attributes","comments":""},"destination":{"id":"e244f5c1-4809-32a8-8d9f-acaca2dd1831","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"FetchCDPObjectStore","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["matched"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"4b621cc0-14a0-373c-8c68-5ed3bbe491f1","name":"","source":{"id":"346daf70-3a56-365a-a592-bf2a2b2d96a6","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Wait","comments":""},"destination":{"id":"a7828f3c-0506-3fb2-b8f7-1aa9e0ee5322","type":"FUNNEL","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Funnel","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["wait","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1608.0,"y":880.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"438c95b7-d24e-3a74-971d-5bfda14c7e0e","name":"","source":{"id":"c5939a7c-0ad8-30bd-9ef7-914b94876408","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Set Failure Filename","comments":""},"destination":{"id":"3ca0c731-6c77-3407-8d55-f5fa7e06e53d","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"ERROR - PutFile did not complete","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"b9a43f3e-1590-3e51-8fef-eab82033988f","name":"","source":{"id":"346daf70-3a56-365a-a592-bf2a2b2d96a6","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Wait","comments":""},"destination":{"id":"c5939a7c-0ad8-30bd-9ef7-914b94876408","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Set Failure Filename","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["expired"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"d359b0cf-b0c9-364c-888f-2fa4cf5b8bcf","name":"","source":{"id":"e244f5c1-4809-32a8-8d9f-acaca2dd1831","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"FetchCDPObjectStore","comments":""},"destination":{"id":"79d6ed56-4f5e-3974-9aaa-e3e4eb089530","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Set Path Properties","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"6b16c6f4-cfa8-3d69-a2df-92e22a856466","name":"","source":{"id":"111378ea-c181-3f57-b3a8-cd80f60bc193","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Bash Listing of Files","comments":""},"destination":{"id":"cc56e64f-869a-3aee-a1b3-cfeac8a883c7","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Logging - Bash Listing of Files","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"40312387-db6e-3b34-8c4f-238793188692","name":"","source":{"id":"d1c3276e-2c6a-3faa-a9dc-7575fa16ad97","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Create Metadata Update SQL","comments":""},"destination":{"id":"ece67a58-0f7c-318f-91cb-ebce00e40054","type":"FUNNEL","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Funnel","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"dac30970-b85d-36db-b92f-f6d6cb4ab057","name":"","source":{"id":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Save Data to OnPrem HDFS","comments":""},"destination":{"id":"f515d7ce-c8c2-3a7f-b3e6-50bf20e6b16d","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Logging - Save Data to OnPrem HDFS","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"26cf8add-b040-3501-aa9b-efbd2303b1a1","name":"","source":{"id":"d1c3276e-2c6a-3faa-a9dc-7575fa16ad97","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Create Metadata Update SQL","comments":""},"destination":{"id":"ce24d645-590a-3395-b96b-58f13bed8199","type":"OUTPUT_PORT","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"OutputToHive","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1288.0,"y":1312.0},{"x":1200.0,"y":1360.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"4c088508-7f90-373b-b2b2-41b680af470f","name":"","source":{"id":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Save Data to OnPrem HDFS","comments":""},"destination":{"id":"861683ef-30f8-3b8d-91b9-9a53a8803469","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Notify","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"bc5d22a3-9159-3b6f-8b6e-2657a6242130","name":"","source":{"id":"8f63d51f-c67d-335f-a62c-75125384eaef","type":"INPUT_PORT","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"InputHDFSTransfer","comments":""},"destination":{"id":"111378ea-c181-3f57-b3a8-cd80f60bc193","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Bash Listing of Files","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"42ab62d2-ee08-3d88-bfdd-61c23fcabe95","name":"","source":{"id":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"SplitText","comments":""},"destination":{"id":"659dd95e-b1ea-39d8-9de7-af720ae7209c","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Extract Text to Attributes","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["splits"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"5e5ee097-3410-31b6-844d-2efb4f63e0f0","name":"","source":{"id":"111378ea-c181-3f57-b3a8-cd80f60bc193","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Bash Listing of Files","comments":""},"destination":{"id":"01a01ee7-5636-3c4d-bdbc-6973eb8e33ee","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"SplitText","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"d952eacf-5765-3368-a498-4c7a66cd879a","name":"","source":{"id":"d1c3276e-2c6a-3faa-a9dc-7575fa16ad97","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Create Metadata Update SQL","comments":""},"destination":{"id":"29465ddc-abf9-3b6d-9ff2-df12cc811f68","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Logging - Create Metadata Update SQL","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"cfe1171e-3642-315d-ac57-f335206be485","name":"","source":{"id":"e244f5c1-4809-32a8-8d9f-acaca2dd1831","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"FetchCDPObjectStore","comments":""},"destination":{"id":"7c6f11fc-e52b-3571-b3fb-ee21e695440a","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Logging - Fetch CDP Object Store","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["comms.failure","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"c866ed68-3281-31f4-9344-4fbf35e7bc6d","name":"","source":{"id":"79d6ed56-4f5e-3974-9aaa-e3e4eb089530","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Set Path Properties","comments":""},"destination":{"id":"f9549bec-fcb6-33ca-ad98-31cf61b0f6f8","type":"PROCESSOR","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"Save Data to OnPrem HDFS","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"}],"labels":[{"identifier":"a236303c-656e-32f0-b9af-dddead00d5e2","position":{"x":-552.0,"y":1344.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"8dc37d38-d6da-3545-8800-e423209139c6","position":{"x":-488.0,"y":752.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"95899c30-d92f-39e8-aa57-7373fc7878c6","position":{"x":752.0,"y":1472.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"492812ae-2a78-34bf-9cf3-5347948aadd4","position":{"x":-32.0,"y":792.0},"label":"Please allow time for \nthe bash script to run","width":128.0,"height":40.0,"style":{"font-size":"12px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"01fd9af8-f451-32a1-a2fe-884c7a844756","position":{"x":544.0,"y":688.0},"label":"Data Transfer to OnPrem Direct Tables","width":440.0,"height":48.0,"style":{"background-color":"#2bc265","font-size":"24px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"6be94b1f-38ff-3895-9418-4a28f2807351","position":{"x":128.0,"y":720.0},"label":"Restarts for this section of the flow can be \ntriggered from this processor","width":264.0,"height":48.0,"style":{"background-color":"#edd6ff","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"eef8b121-21c5-359a-9d0b-af4c4ce04f33","position":{"x":2312.0,"y":1064.0},"label":"If the wait processor expires, this indicates \nthat for a given source system and country \nthe tables that don't need to be detokenised \nwere not saved properly to HDP\n\n\nFrom here, an acknowledgement of the \nfailure will be written to the local file \nsystem. The flow can be replayed to try \nagain from the first processor in this process \ngroup, or from the first processor of the \nwhole flow","width":264.0,"height":160.0,"style":{"background-color":"#cf7fab","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"aab160a7-0ff7-3d50-8a67-035fbc634be2","position":{"x":1768.0,"y":1352.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"}],"funnels":[{"identifier":"72935ba1-405b-35f0-ad32-56c056b9dbd5","position":{"x":-1640.0,"y":1192.0},"componentType":"FUNNEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"a7828f3c-0506-3fb2-b8f7-1aa9e0ee5322","position":{"x":1824.0,"y":856.0},"componentType":"FUNNEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"ece67a58-0f7c-318f-91cb-ebce00e40054","position":{"x":1816.0,"y":1216.0},"componentType":"FUNNEL","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"}],"controllerServices":[{"identifier":"0534102f-790c-3b4a-bc91-72f832e16dd8","name":"KeytabCredentialsService_SCB_onprem","comments":"","type":"org.apache.nifi.kerberos.KeytabCredentialsService","bundle":{"group":"org.apache.nifi","artifact":"nifi-kerberos-credentials-service-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.kerberos.KerberosCredentialsService","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"Kerberos Keytab":"/hadoopfs/fs1/onprem_hdfs_config/srv_azt1eglrwhaassit.keytab","Kerberos Principal":"srv_azt1eglrwhaassit@ZONE1.SCBDEV.NET"},"propertyDescriptors":{"Kerberos Keytab":{"name":"Kerberos Keytab","displayName":"Kerberos Keytab","identifiesControllerService":false,"sensitive":false},"Kerberos Principal":{"name":"Kerberos Principal","displayName":"Kerberos Principal","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"},{"identifier":"e79265a6-062d-3115-9e8c-f07ee663f640","name":"DistributedMapCacheClientService_Plain","comments":"","type":"org.apache.nifi.distributed.cache.client.DistributedMapCacheClientService","bundle":{"group":"org.apache.nifi","artifact":"nifi-distributed-cache-services-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.distributed.cache.client.DistributedMapCacheClient","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}},{"type":"org.apache.nifi.distributed.cache.client.AtomicDistributedMapCacheClient","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"SSL Context Service":null,"Server Port":"4557","Server Hostname":"nifisit-nifi0.haassit1.hk87-pa28.cloudera.site","Communications Timeout":"30 secs"},"propertyDescriptors":{"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false},"Server Port":{"name":"Server Port","displayName":"Server Port","identifiesControllerService":false,"sensitive":false},"Server Hostname":{"name":"Server Hostname","displayName":"Server Hostname","identifiesControllerService":false,"sensitive":false},"Communications Timeout":{"name":"Communications Timeout","displayName":"Communications Timeout","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"cd7050b9-5f13-314d-9290-340227cc1a39"}],"variables":{},"flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"}],"remoteProcessGroups":[],"processors":[{"identifier":"2251bfbb-2905-3745-a7c5-c90b8695663a","name":"Setting Base Attributes","comments":"","position":{"x":776.0,"y":664.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","properties":{"country":"${filename:substringAfter(\"_\"):substringBefore(\"_\")}","databases":"SRI_OPEN","Delete Attributes Expression":null,"partition":"${filename:substringAfterLast(\"_\"):substringBefore(\".\")}","Param Path":"${absolute.path:replace(\"archival\",\"configs\")}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","sourcesystem_and_country":"${filename:substringBefore(\"_\")}-${filename:substringAfter(\"_\"):substringBefore(\"_\")}","Stateful Variables Initial Value":null,"sourcesystem":"${filename:substringBefore(\"_\")}","logdir":"${absolute.path}"},"propertyDescriptors":{"country":{"name":"country","displayName":"country","identifiesControllerService":false,"sensitive":false},"databases":{"name":"databases","displayName":"databases","identifiesControllerService":false,"sensitive":false},"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false},"partition":{"name":"partition","displayName":"partition","identifiesControllerService":false,"sensitive":false},"Param Path":{"name":"Param Path","displayName":"Param Path","identifiesControllerService":false,"sensitive":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false},"sourcesystem_and_country":{"name":"sourcesystem_and_country","displayName":"sourcesystem_and_country","identifiesControllerService":false,"sensitive":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false},"sourcesystem":{"name":"sourcesystem","displayName":"sourcesystem","identifiesControllerService":false,"sensitive":false},"logdir":{"name":"logdir","displayName":"logdir","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"03b230c2-81d0-3be5-818f-27060be89f93","name":"Logging - File Checker Job","comments":"","position":{"x":-376.0,"y":1232.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"143\";-m;\"Reverse Data Copy Python File Checker Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"b5eb46ab-2554-34ad-bf68-23dba484a01b","name":"RECON","comments":"","position":{"x":504.0,"y":2088.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/cloud_recon.sh","Working Directory":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"${\"kerberos_keytab_onprem\"};${\"kerberos_principal_onprem\"};${\"sourcesystem_xml\"};${\"country_xml\"};${\"abfs_location\"};${\"hdfs_parent_dir_xml\"};${\"sri_open_staging_dir\"};${\"sri_non_open_staging_dir\"},${\"storage_staging_dir\"},${\"databases\"};${\"consumed_tables_xml\"};${\"db_partition_map\"};${\"partition\"};\"eglex_sit_ops\";\"CLOUD_ONPREM_RECON\";${\"status_file_location_xml\"}"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"cb411554-5bda-3574-81bb-5501ccf0af76","name":"FailedToUpdateHive","comments":"","position":{"x":-104.0,"y":1800.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.PutFile","properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/tmp","Conflict Resolution Strategy":"fail"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"5726f46b-4935-30bc-a586-b5250790c79b","name":"SparkDeTokenisation","comments":"","position":{"x":488.0,"y":1392.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/data/edmpcloudfw/SDM/SIT/deployment/1.3.1/scripts/sdm-detokenization-util-cloud.sh","Working Directory":"/data/edmpcloudfw/SDM/SIT/deployment/1.3.1/scripts","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"${\"kerberos_keytab_onprem\"};${\"kerberos_principal_onprem\"};${\"sourcesystem_xml\"};${\"country_xml\"};${\"nfs_location_xml\"};${\"consumed_tables_detokenise\"};\"${\"partition\"}\";\"${\"partition\"}\";${\"hdfs_parent_dir_xml\"};${\"databases\"};${\"abfs_location\"};${\"status_file_location_xml\"}"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"60902bde-1137-37b2-a87e-09c4fa53460f","name":"Logging - Spark Metadata Update Job","comments":"","position":{"x":1088.0,"y":1816.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"144\";-m;\"Reverse Data Copy Metadata Update Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"bdb09e75-8476-3e27-ac96-e48c0d6f2970","name":"ReconFailure","comments":"","position":{"x":744.0,"y":2296.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.PutFile","properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/tmp","Conflict Resolution Strategy":"fail"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"85a95922-5817-333f-9f45-c79b5f7caf64","name":"Logging - Spark DeTokenized Job","comments":"","position":{"x":928.0,"y":1392.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"142\";-m;\"Reverse Data Copy DeTokenization Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"5c35be55-b5fd-3e8c-88b3-745e9a6e22d7","name":"Run Spark Metadata Update","comments":"","position":{"x":504.0,"y":1704.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/metaupdate.py","Working Directory":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-k;${\"kerberos_keytab_onprem\"};-t;${\"kerberos_principal_onprem\"};-s;${\"sourcesystem\"};-c;${\"country\"};-d;${\"status_file_location_xml\"};-p;${\"partition\"}"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"0960f711-4894-3b26-8fe1-364fd19ba58c","name":"ReconSuccess","comments":"","position":{"x":248.0,"y":2288.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.PutFile","properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/tmp","Conflict Resolution Strategy":"fail"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"d8f1ba35-172b-3169-b8d4-6486f1b6d98d","name":"RouteOnAttribute","comments":"","position":{"x":504.0,"y":1896.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.RouteOnAttribute","properties":{"Routing Strategy":"Route to 'match' if all match","metadata_success":"${consumed_tables_detokenise:notNull()}"},"propertyDescriptors":{"Routing Strategy":{"name":"Routing Strategy","displayName":"Routing Strategy","identifiesControllerService":false,"sensitive":false},"metadata_success":{"name":"metadata_success","displayName":"metadata_success","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["unmatched"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"3f31ef9e-ae4b-3776-a1bd-482e4c365ae2","name":"Logging - Fetch Param File","comments":"","position":{"x":1840.0,"y":664.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"137\";-m;\"Reverse Data Copy Fetch Param File Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"72390e84-aa3c-35bb-bd4c-3528d8d006b4","name":"Acknowledgement Trigger","comments":"","position":{"x":776.0,"y":200.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ListFile","properties":{"Minimum File Age":"0 sec","et-initial-listing-target":"all","Maximum File Age":null,"max-listing-time":"3 mins","record-writer":null,"Maximum File Size":null,"et-time-window":"3 hours","et-node-identifier":"${hostname()}","Recurse Subdirectories":"true","File Filter":".*_integrated_recon_completion_.*\\.ack","Path Filter":null,"Include File Attributes":"true","Input Directory Location":"Local","listing-strategy":"timestamps","Input Directory":"/data/edmpcloud/SDM/SIT/eglex/au/archival","target-system-timestamp-precision":"auto-detect","track-performance":"false","max-performance-metrics":"100000","Minimum File Size":"0 B","Ignore Hidden Files":"true","et-state-cache":null,"max-operation-time":"10 secs"},"propertyDescriptors":{"Minimum File Age":{"name":"Minimum File Age","displayName":"Minimum File Age","identifiesControllerService":false,"sensitive":false},"et-initial-listing-target":{"name":"et-initial-listing-target","displayName":"Entity Tracking Initial Listing Target","identifiesControllerService":false,"sensitive":false},"Maximum File Age":{"name":"Maximum File Age","displayName":"Maximum File Age","identifiesControllerService":false,"sensitive":false},"max-listing-time":{"name":"max-listing-time","displayName":"Max Directory Listing Time","identifiesControllerService":false,"sensitive":false},"record-writer":{"name":"record-writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false},"Maximum File Size":{"name":"Maximum File Size","displayName":"Maximum File Size","identifiesControllerService":false,"sensitive":false},"et-time-window":{"name":"et-time-window","displayName":"Entity Tracking Time Window","identifiesControllerService":false,"sensitive":false},"et-node-identifier":{"name":"et-node-identifier","displayName":"Entity Tracking Node Identifier","identifiesControllerService":false,"sensitive":false},"Recurse Subdirectories":{"name":"Recurse Subdirectories","displayName":"Recurse Subdirectories","identifiesControllerService":false,"sensitive":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false},"Path Filter":{"name":"Path Filter","displayName":"Path Filter","identifiesControllerService":false,"sensitive":false},"Include File Attributes":{"name":"Include File Attributes","displayName":"Include File Attributes","identifiesControllerService":false,"sensitive":false},"Input Directory Location":{"name":"Input Directory Location","displayName":"Input Directory Location","identifiesControllerService":false,"sensitive":false},"listing-strategy":{"name":"listing-strategy","displayName":"Listing Strategy","identifiesControllerService":false,"sensitive":false},"Input Directory":{"name":"Input Directory","displayName":"Input Directory","identifiesControllerService":false,"sensitive":false},"target-system-timestamp-precision":{"name":"target-system-timestamp-precision","displayName":"Target System Timestamp Precision","identifiesControllerService":false,"sensitive":false},"track-performance":{"name":"track-performance","displayName":"Track Performance","identifiesControllerService":false,"sensitive":false},"max-performance-metrics":{"name":"max-performance-metrics","displayName":"Maximum Number of Files to Track","identifiesControllerService":false,"sensitive":false},"Minimum File Size":{"name":"Minimum File Size","displayName":"Minimum File Size","identifiesControllerService":false,"sensitive":false},"Ignore Hidden Files":{"name":"Ignore Hidden Files","displayName":"Ignore Hidden Files","identifiesControllerService":false,"sensitive":false},"et-state-cache":{"name":"et-state-cache","displayName":"Entity Tracking State Cache","identifiesControllerService":true,"sensitive":false},"max-operation-time":{"name":"max-operation-time","displayName":"Max Disk Operation Time","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"6bb4be77-f513-367d-9918-392b5d570f7d","name":"PythonScriptFileChecker","comments":"","position":{"x":-24.0,"y":1392.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/data/edmpcloudfw/SDM/SIT/deployment/cdp_data_copy/scripts/file_checker.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-p;${\"nfs_location_xml\"};-f;${\"status_file_location_xml\"};-s;${\"sourcesystem_xml\"};-c;${\"country_xml\"};-d;${\"databases\"};-x;${\"partition\"};-t;${\"consumed_tables_detokenise\"};-k;${\"kerberos_keytab_xml\"};-u;${\"kerberos_principal_xml\"};-m;${\"db_partition_map\"}"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"19cd72f1-5f1a-370b-a2f8-2526a0f7773b","name":"Logging - Recon Job","comments":"","position":{"x":-88.0,"y":2088.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Command Path":"/tmp/alert.py","Working Directory":null,"Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"-l;${\"logdir\"};-s;${\"sourcesystem\"};-c;${\"country\"};-e;\"145\";-m;\"Reverse Data Copy Recon Failed\""},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["output stream","original","nonzero status"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"d44a66c8-8edd-3ee4-8db3-f76f0cc30ab3","name":"Obtain Params File","comments":"","position":{"x":1384.0,"y":664.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.13.2.2.2.3.3-2"},"style":{},"type":"org.apache.nifi.processors.standard.FetchFile","properties":{"Move Conflict Strategy":"Rename","Log level when file not found":"ERROR","Move Destination Directory":null,"Log level when permission denied":"ERROR","File to Fetch":"${\"Param Path\"}/${\"sourcesystem\"}_${\"country\"}_param.xml","Completion Strategy":"None"},"propertyDescriptors":{"Move Conflict Strategy":{"name":"Move Conflict Strategy","displayName":"Move Conflict Strategy","identifiesControllerService":false,"sensitive":false},"Log level when file not found":{"name":"Log level when file not found","displayName":"Log level when file not found","identifiesControllerService":false,"sensitive":false},"Move Destination Directory":{"name":"Move Destination Directory","displayName":"Move Destination Directory","identifiesControllerService":false,"sensitive":false},"Log level when permission denied":{"name":"Log level when permission denied","displayName":"Log level when permission denied","identifiesControllerService":false,"sensitive":false},"File to Fetch":{"name":"File to Fetch","displayName":"File to Fetch","identifiesControllerService":false,"sensitive":false},"Completion Strategy":{"name":"Completion Strategy","displayName":"Completion Strategy","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"0d128c7a-b6a0-3792-b4a3-a3e40f28db49","name":"","source":{"id":"ce24d645-590a-3395-b96b-58f13bed8199","type":"OUTPUT_PORT","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"OutputToHive","comments":""},"destination":{"id":"5c35be55-b5fd-3e8c-88b3-745e9a6e22d7","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Run Spark Metadata Update","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1336.0,"y":1768.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"94953fcc-641a-3b00-8f31-ca4d94871daa","name":"","source":{"id":"5c35be55-b5fd-3e8c-88b3-745e9a6e22d7","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Run Spark Metadata Update","comments":""},"destination":{"id":"d8f1ba35-172b-3169-b8d4-6486f1b6d98d","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"RouteOnAttribute","comments":""},"labelIndex":0,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"012bc25e-4585-304b-90f0-a93548f6134a","name":"","source":{"id":"5726f46b-4935-30bc-a586-b5250790c79b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"SparkDeTokenisation","comments":""},"destination":{"id":"85a95922-5817-333f-9f45-c79b5f7caf64","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Logging - Spark DeTokenized Job","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"2c0c77f5-1508-38ed-9f1b-dc6f4d2378dc","name":"","source":{"id":"d44a66c8-8edd-3ee4-8db3-f76f0cc30ab3","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Obtain Params File","comments":""},"destination":{"id":"3f31ef9e-ae4b-3776-a1bd-482e4c365ae2","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Logging - Fetch Param File","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure","permission.denied","not.found"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"1d06f79b-40aa-38a9-b139-1eb7b890298a","name":"","source":{"id":"12ed7b4e-eca0-33c2-b606-34fc24b149ac","type":"OUTPUT_PORT","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"XMLParserOutput","comments":""},"destination":{"id":"8f63d51f-c67d-335f-a62c-75125384eaef","type":"INPUT_PORT","groupId":"cd7050b9-5f13-314d-9290-340227cc1a39","name":"InputHDFSTransfer","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"f5c4c5bc-0c76-3552-b06a-a54e5fd24198","name":"","source":{"id":"d4ad6e22-053c-3577-844c-a12e4c6b16da","type":"OUTPUT_PORT","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"OutputHDFSTransfer","comments":""},"destination":{"id":"5726f46b-4935-30bc-a586-b5250790c79b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"SparkDeTokenisation","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":672.0,"y":1352.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"61e2ff78-38da-3198-bea9-10d5e1ea92ab","name":"","source":{"id":"b5eb46ab-2554-34ad-bf68-23dba484a01b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"RECON","comments":""},"destination":{"id":"0960f711-4894-3b26-8fe1-364fd19ba58c","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"ReconSuccess","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"de860b20-f2a1-3999-92e5-813ff28a672a","name":"","source":{"id":"72390e84-aa3c-35bb-bd4c-3528d8d006b4","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Acknowledgement Trigger","comments":""},"destination":{"id":"f99cb23e-7e85-3b5d-b554-75d5405f4fcb","type":"INPUT_PORT","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"XMLParserInput","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"b5cbd281-c778-3491-ac1b-3e68ccad2753","name":"","source":{"id":"5c35be55-b5fd-3e8c-88b3-745e9a6e22d7","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Run Spark Metadata Update","comments":""},"destination":{"id":"60902bde-1137-37b2-a87e-09c4fa53460f","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Logging - Spark Metadata Update Job","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"843b0ee1-2383-3295-a2a9-a3e6841ed766","name":"","source":{"id":"d44a66c8-8edd-3ee4-8db3-f76f0cc30ab3","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Obtain Params File","comments":""},"destination":{"id":"56737ebe-27cf-3b58-9aa0-99efc2895ca6","type":"INPUT_PORT","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"XMLParserInput","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1560.0,"y":952.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"fe6f9ed4-0d75-3b97-a6bd-5f020796b173","name":"","source":{"id":"0960f711-4894-3b26-8fe1-364fd19ba58c","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"ReconSuccess","comments":""},"destination":{"id":"0960f711-4894-3b26-8fe1-364fd19ba58c","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"ReconSuccess","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":113.11370849609375,"y":2306.211669921875},{"x":113.11370849609375,"y":2354.211669921875}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"ca755c79-1f2e-3614-969a-21c916467e15","name":"","source":{"id":"6bb4be77-f513-367d-9918-392b5d570f7d","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"PythonScriptFileChecker","comments":""},"destination":{"id":"5c35be55-b5fd-3e8c-88b3-745e9a6e22d7","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Run Spark Metadata Update","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":152.0,"y":1768.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"b1fb1144-bab7-3ac4-8b63-cc1b10ec8161","name":"","source":{"id":"5c35be55-b5fd-3e8c-88b3-745e9a6e22d7","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Run Spark Metadata Update","comments":""},"destination":{"id":"cb411554-5bda-3574-81bb-5501ccf0af76","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"FailedToUpdateHive","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"acb66a9c-bee1-3624-839b-b2029e1b2681","name":"","source":{"id":"6bb4be77-f513-367d-9918-392b5d570f7d","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"PythonScriptFileChecker","comments":""},"destination":{"id":"fdc3bde1-40fc-32d5-ab04-b9ada6da6e32","type":"FUNNEL","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Funnel","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"c59b9c9d-31f6-3edd-acb2-69a3976b3fa8","name":"","source":{"id":"cb411554-5bda-3574-81bb-5501ccf0af76","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"FailedToUpdateHive","comments":""},"destination":{"id":"cb411554-5bda-3574-81bb-5501ccf0af76","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"FailedToUpdateHive","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":374.56583404541016,"y":1837.0574951171875},{"x":374.56583404541016,"y":1887.0574951171875}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"308f2ea8-463f-3ba2-8aec-8848b5bfb9e6","name":"","source":{"id":"2251bfbb-2905-3745-a7c5-c90b8695663a","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Setting Base Attributes","comments":""},"destination":{"id":"d44a66c8-8edd-3ee4-8db3-f76f0cc30ab3","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Obtain Params File","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"a623fccb-c990-3f67-ad0c-cae8a94d0cb6","name":"","source":{"id":"6bb4be77-f513-367d-9918-392b5d570f7d","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"PythonScriptFileChecker","comments":""},"destination":{"id":"03b230c2-81d0-3be5-818f-27060be89f93","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Logging - File Checker Job","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"72a00c28-7d85-3ee5-a1e5-25c16d6bc3a1","name":"","source":{"id":"b5eb46ab-2554-34ad-bf68-23dba484a01b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"RECON","comments":""},"destination":{"id":"bdb09e75-8476-3e27-ac96-e48c0d6f2970","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"ReconFailure","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"b93d27b5-34c8-3630-a18b-8dd4b13bdf8d","name":"","source":{"id":"bc23cef4-b09e-37da-8130-78228b0287af","type":"OUTPUT_PORT","groupId":"231d8fce-4595-36f9-9381-8d55f5f5c00c","name":"XMLParserOutput","comments":""},"destination":{"id":"2251bfbb-2905-3745-a7c5-c90b8695663a","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Setting Base Attributes","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"84b1e2e2-3f1a-30c5-978f-ac1a3c423f29","name":"","source":{"id":"12ed7b4e-eca0-33c2-b606-34fc24b149ac","type":"OUTPUT_PORT","groupId":"809a55ff-ed21-3f31-8a72-a5de22e93164","name":"XMLParserOutput","comments":""},"destination":{"id":"8f63d51f-c67d-335f-a62c-75125384eaef","type":"INPUT_PORT","groupId":"186dcbcd-4a5c-3c83-9459-f34e9286a97e","name":"InputHDFSTransfer","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"be77685a-d224-3bfc-a1b9-6aece5fdb106","name":"","source":{"id":"b5eb46ab-2554-34ad-bf68-23dba484a01b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"RECON","comments":""},"destination":{"id":"19cd72f1-5f1a-370b-a2f8-2526a0f7773b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"Logging - Recon Job","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"97abf41d-857e-3060-9d83-2f4c7399e325","name":"","source":{"id":"5726f46b-4935-30bc-a586-b5250790c79b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"SparkDeTokenisation","comments":""},"destination":{"id":"6bb4be77-f513-367d-9918-392b5d570f7d","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"PythonScriptFileChecker","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"17bd542f-85d2-3362-b5df-5bae43ddf37c","name":"","source":{"id":"d8f1ba35-172b-3169-b8d4-6486f1b6d98d","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"RouteOnAttribute","comments":""},"destination":{"id":"b5eb46ab-2554-34ad-bf68-23dba484a01b","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"RECON","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["matched"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"154ffecd-25aa-3c1c-9e02-f8a9a92f3564","name":"","source":{"id":"bdb09e75-8476-3e27-ac96-e48c0d6f2970","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"ReconFailure","comments":""},"destination":{"id":"bdb09e75-8476-3e27-ac96-e48c0d6f2970","type":"PROCESSOR","groupId":"0ec2306d-3a99-3812-abee-4c12799fbaa1","name":"ReconFailure","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1205.8148803710938,"y":2323.094482421875},{"x":1205.8148803710938,"y":2373.094482421875}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"}],"labels":[{"identifier":"c6c14c63-58a1-3227-9f76-39580173bf2b","position":{"x":1320.0,"y":1096.0},"label":"Vanilla/Plain","width":128.0,"height":24.0,"style":{"background-color":"#d6f6ff","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"ce248221-de2c-3e41-a2ff-a02c3969cb19","position":{"x":928.0,"y":1360.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"06a33cd3-e697-3816-8901-f416b8269528","position":{"x":816.0,"y":152.0},"label":"Pick up acknowledgement file from ADLS","width":256.0,"height":32.0,"style":{"font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"587f17c3-ac0c-371e-bcc3-825a8a77761b","position":{"x":1952.0,"y":632.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"abc60749-21b7-3422-a08f-479c805cde6a","position":{"x":1824.0,"y":1024.0},"label":"error_code     error_message\n\n137\t\tReverse Data Copy Fetch Param File Failed\n138\t\tReverse Data Copy HDFS Transfer List of Tokenized Tables Files Failed\n139 \tReverse Data Copy HDFS Transfer Fetch Tokenized Tables Data From ADLS Gen 2 Failed\n140\t\tReverse Data Copy HDFS Transfer Save Tokenized Tables Data To OnPrem HDFS Staging Failed\n141\t\tReverse Data Copy HDFS Transfer Create Cleansed Tokenized Table List Failed\n142\t\tReverse Data Copy Detokenization Failed\n143\t\tReverse Data Copy Python File Checker Failed\n144\t\tReverse Data Copy Metadata update Failed\n145 Reverse Data Copy Recon Failed\n146\t\tReverse Data Copy HDFS Direct Transfer List of Plain Tables File Failed\n147 \tReverse Data Copy HDFS Direct Transfer Fetch CDP Object Store Failed\n148\t\tReverse Data Copy HDFS Direct Transfer Save Data of Plain Tables To OnPrem HDFS Failed\n149\t\tReverse Data Copy HDFS Direct Transfer Create Metadata Update SQL Failed\n150         Reverse Data Copy XML Parser Add DB Partition Mapping Failed","width":656.0,"height":296.0,"style":{"background-color":"#9ba8f2","font-size":"14px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"36141de8-87ed-3a67-b9ae-60eb5c35400d","position":{"x":560.0,"y":672.0},"label":"add log related attributes","width":176.0,"height":32.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"257455f9-45a0-3223-837c-a1560ff95240","position":{"x":-80.0,"y":2056.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"dc53dab9-e86f-3829-b879-c4b639935bd4","position":{"x":2056.0,"y":2024.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"d506a89f-5567-3b58-8e62-ba34dc7e95f4","position":{"x":856.0,"y":824.0},"label":"Get sourcesystem and country from filename","width":272.0,"height":24.0,"style":{"font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"c4796556-f747-3761-bba6-89db6a751348","position":{"x":552.0,"y":1096.0},"label":"Interim Stage + Detokenise","width":160.0,"height":24.0,"style":{"background-color":"#d6f6ff","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"a591f270-3d0f-3080-b776-f9353d4dbc15","position":{"x":1432.0,"y":632.0},"label":"Get contents of corresponding params file","width":272.0,"height":24.0,"style":{"font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"1c59a36b-6c25-3918-a7b5-7b42ab34c856","position":{"x":824.0,"y":1640.0},"label":"<<<<< Plain Tables Metadata Update","width":272.0,"height":32.0,"style":{"background-color":"#2bc265","font-size":"16px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"be2b81da-55dd-3097-8368-41aebeb5e03e","position":{"x":-368.0,"y":1200.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"572b769f-4b5c-3eb8-88ac-aed5a8fd55f4","position":{"x":312.0,"y":1648.0},"label":"Detokenise Metadata Update >>>>>","width":264.0,"height":32.0,"style":{"background-color":"#27b9e6","font-size":"16px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"},{"identifier":"9257f6f1-108c-3509-8dda-03b9e5583a1b","position":{"x":1096.0,"y":1776.0},"label":"log","width":64.0,"height":24.0,"style":{"background-color":"#9ba8f2","font-size":"12px"},"componentType":"LABEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"}],"funnels":[{"identifier":"fdc3bde1-40fc-32d5-ab04-b9ada6da6e32","position":{"x":128.0,"y":1216.0},"componentType":"FUNNEL","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"}],"controllerServices":[{"identifier":"6bb8ec34-4727-3d4c-abed-8981068394d8","name":"KeytabCredentialsService_SCB_cloud","comments":"","type":"org.apache.nifi.kerberos.KeytabCredentialsService","bundle":{"group":"org.apache.nifi","artifact":"nifi-kerberos-credentials-service-nar","version":"1.13.2.2.2.3.3-2"},"controllerServiceApis":[{"type":"org.apache.nifi.kerberos.KerberosCredentialsService","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"1.13.2.2.2.3.3-2"}}],"properties":{"Kerberos Keytab":"/hadoopfs/fs1/cloud_keytab/haassit1-srv_datacopy_devusr.keytab","Kerberos Principal":"srv_datacopy_devusr@HAASSIT1.HK87-PA28.CLOUDERA.SITE"},"propertyDescriptors":{"Kerberos Keytab":{"name":"Kerberos Keytab","displayName":"Kerberos Keytab","identifiesControllerService":false,"sensitive":false},"Kerberos Principal":{"name":"Kerberos Principal","displayName":"Kerberos Principal","identifiesControllerService":false,"sensitive":false}},"componentType":"CONTROLLER_SERVICE","groupIdentifier":"0ec2306d-3a99-3812-abee-4c12799fbaa1"}],"variables":{},"flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP"},"externalControllerServices":{},"parameterContexts":{},"flowEncodingVersion":"1.0"}